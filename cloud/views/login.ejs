<!DOCTYPE html><html>	<head>		<meta charset="UTF-8">		<meta name="viewport" content="width=device-width, initial-scale=1.0">		<title>LogIn</title>        <script src="//code.jquery.com/jquery-1.10.2.js"></script>        <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>        <script src="//www.parsecdn.com/js/parse-1.4.2.min.js"></script>	<script>	function registerClient(){		document.getElementById("LoginDivForm").style.display='none';		document.getElementById("registerClientForm").style.display = '';			}		function gobacktoLogin(){		document.getElementById("registerClientForm").style.display = 'none';		document.getElementById("LoginDivForm").style.display='';	}	</script>	<style>	    .centerRow { margin-left:auto; margin-right:auto; }	    .spaceRow { margin-top:10px; margin-bottom:10px; }	    .inputText {            width: 230px;            height: 33px;            font-size: 11.25pt;            font-family: Jura;            font-weight: 400;            color: rgb(64,64,64);            text-align: center;}        .buttonLogin {            text-decoration: none;            width: 200px;            height: 30px;            background-color: slategray;            font-size: 9.00pt;            font-weight: 400;            font-style: normal;            color: rgb(255,255,255);        }        .buttonOK {            text-decoration: none;            width: 200px;            height: 30px;            background-color: rgb(200,10,10);            font-size: 9.00pt;            font-weight: 400;            font-style: normal;            color: rgb(255,255,255);        }        .buttonCancel {            text-decoration: none;            width: 200px;            height: 30px;            background-color: rgb(10,10,200);            font-size: 9.00pt;            font-weight: 400;            font-style: normal;            color: rgb(255,255,255);        }        @font-face {            font-family:"VT323";            src: url("fonts/VT323-Regular.ttf");        }        @font-face {            font-family:"Jura";            src: url("fonts/Jura-Regular.ttf");        }	</style>	<style>	.modalDialog {		position: fixed;		font-family: Arial, Helvetica, sans-serif;		top: 0;		right: 0;		bottom: 0;		left: 0;		background: rgba(0,0,0,0.8);		z-index: 99999;		opacity:0;		-webkit-transition: opacity 400ms ease-in;		-moz-transition: opacity 400ms ease-in;		transition: opacity 400ms ease-in;		pointer-events: none;	}	.modalDialog:target {		opacity:1;		pointer-events: auto;	}	.modalDialog > div {		width: 400px;		position: relative;		/*margin: 10% auto;*/		margin-left: auto;		margin-right: auto;		margin-top: 10px;		padding: 5px 20px 13px 20px;		border-radius: 10px;		background: #fff;		background: -moz-linear-gradient(#fff, #999);		background: -webkit-linear-gradient(#fff, #999);		background: -o-linear-gradient(#fff, #999);	}	.close {		background: #606061;		color: #FFFFFF;		line-height: 25px;		position: absolute;		right: -12px;		text-align: center;		top: -10px;		width: 24px;		text-decoration: none;		font-weight: bold;		-webkit-border-radius: 12px;		-moz-border-radius: 12px;		border-radius: 12px;		-moz-box-shadow: 1px 1px 3px #000;		-webkit-box-shadow: 1px 1px 3px #000;		box-shadow: 1px 1px 3px #000;	}	.close:hover { background: #00d9ff; }	</style>	</head>	<body id="body" style="background-color:lightgray;">        <form class="formlog" method="post" action="/logins">			<input type="hidden" name="company" id="company" value="<%=company.get("companyLink")%>"/>            <table border=0 style="margin-left:auto; margin-right:auto; width:600px; background-color:white;">                <tr style="background-color:slategray;">                    <td>                        <h1 style="color:white; margin-top:10px; margin-bottom:10px; margin-left:10px; font-family:VT323;">                            LOGIN                        </h1>                    </td>                </tr>                <tr>                    <td>                        <table  class="centerRow" border=0 style="text-align: center;">                            <tr>                                <td>                                    <a class="centerRow" style="margin-left:10px;">                                        <h1 style="font-family:Jura;"><%= company.get("companyLink").toUpperCase() %></h1>                                    </a>                                </td>                            </tr>                            <tr>                                <td>                                    <table border=0>                                        <tr>                                            <td>                                                Username:                                            </td>                                            <td>                                                <input type="text" name="username" id="username" placeholder="Username" class="inputText spaceRow">                                            </td>                                        </tr>                                        <tr>                                            <td>                                                Password:                                            </td>                                            <td>                                                <input type="password" name="password" id="password" placeholder="Password" class="inputText spaceRow">                                            </td>                                        </tr>                                    </table>                                </td>                            </tr>                            <tr>                                <td>                                    <button type="submit" class="centerRow spaceRow buttonLogin">Login</button>                                </td>                            </tr>                        </table>                    </td>                </tr>                <tr  style="background-color:slategray;">                    <td>                        <div class="spaceRow" style="color: rgb(241,196,35);">                            <table border=0 style="width:100%;">                                <tr>                                    <td>                                        <a href="#openModal" style="text-decoration: none;">                                            <span class="inputText">Forgot someting?</span>                                        </a>                                    </td>                                    <td style="text-align:right;">                                        <span style="color:white;">Register: </span>                                        <a href="#registerStoreForm">                                            Store                                        </a>                                        <span style="color:white;">or</span>                                        <a id="btn_openClientRegForm" href="#registerClientForm">                                            <span class="inputText">Client</span>                                        </a>                                    </td>                                </tr>                            </table>                        </div>                    </td>                </tr>            </table>        </form>    <div id="registerClientForm" class="modalDialog">        <div style="width:600px;">            <a href="#close" title="Close" class="close">X</a>            <h1>CLIENT REGISTRATION</h1>            Username: <input type="text" id="txt_user"> Password: <input type="password" id="txt_pass"><br><br>            <table style="width:100%;">                    <tr>                        <td><span class="font-24-REG">Full Name:</span></td><td> <input id="RegClientFullName" type="text" class="textboxform"></td>                        <td><span class="font-24-REG">Address:</span></td><td> <input  id="RegClientAddress" type="text" class="textboxform"></td>                    </tr>                    <tr>                        <td><span class="font-24-REG">Account #:</span></td><td> <input  id="RegClientAccount" type="text" class="textboxform"></td>                        <td><span class="font-24-REG">State:</span></td><td> <input  id="RegClientState" type="text" class="textboxform"></td>                    </tr>                    <tr>                        <td><span class="font-24-REG">ID:</span></td><td> <input  id="RegClientID" type="text" class="textboxform"></td>                        <td><span class="font-24-REG">Country:</span></td><td> <input  id="RegClientCountry" type="text" class="textboxform"></td>                    </tr>                    <tr>                        <td><span class="font-24-REG">Tel:</span></td><td> <input id="RegClientTel"  type="text" class="textboxform"></td>                        <td><span class="font-24-REG">Zip code:</span></td><td> <input  id="RegClientZip"type="text" class="textboxform"></td>                    </tr>                    <tr>                        <td><span class="font-24-REG">Cel:</span></td><td> <input  id="RegClientCel" type="text" class="textboxform"></td>                        <td colspan="2"><input  id="RegClientSHIP" type="checkbox" checked> Shipper <input  id="RegClientCONS" type="checkbox" checked> Consignee</td>                    </tr>                    <tr>                        <td><span class="font-24-REG">Email:</span></td><td> <input  id="RegClientEmail" type="text" class="textboxform"></td>                    </tr>            </table>            <br>            <a href="#consigneesList">Consignees: ( <span id="consigneesCount">0</span> )</a>            <a href="#addConsigneeForm" style="">                <button style="margin-left:auto; margin-right:0px; background-color:#FF4444;">                    Add                </button>            </a>            <br>            <div style="margin-top:10px;">                <a href="#close"><button id="btn_cancelConsignee" class="buttonCancel">Cancel</button></a>                <button type="submit" id="btn_regConsignee" class="buttonOK">Save</button>            </div>        </div>    </div>    <div id="addConsigneeForm" class="modalDialog">        <div style="width:600px;">            <a href="#registerClientForm" title="Close" class="close">X</a>            <h1>Consignee information:</h1>            <table style="width:100%;">                <tr>                    <td>                        <table style="margin-left:30px; margin-top:20px; width:300px; height:150px;">                            <tr>                                <td width=200><span class="font-24-REG">Full Name:</span><td><td> <input  id="FullnameMainClient" type="text" class="textboxform"></td>                            </tr>                            <tr>                                <td><span class="font-24-REG">Address:</span><td><td> <input id="AddressMainClient" type="text" class="textboxform"></td>                            </tr>                            <tr>                                <td><span class="font-24-REG">TEL:</span><td><td> <input  id="TelMainClient" type="text" class="textboxform"></td>                            </tr>                            <tr>                                <td><span class="font-24-REG">CEL:</span><td><td> <input  id="CelMainClient" type="text" class="textboxform"></td>                            </tr>                            <tr>                                <td><span class="font-24-REG">State:</span><td><td> <input id="StateMainClient" type="text" class="textboxform"></td>                            </tr>                            <tr>                                <td><span class="font-24-REG">Country:</span><td><td> <input id="CountryMainClient" type="text" class="textboxform"></td>                            </tr>                            <tr>                                <td><span class="font-24-REG">Zip Code:</span><td><td> <input id="ZipMainClient" type="text" class="textboxform"></td>                            </tr>                        </table>                                                <a href="#registerClientForm">                            <button id="btn_addconsignee" style="background-color:#FF4444;">Add Consignee</button>                        </a>                    </td>                    <td style="vertical-align:top;">                    </td>                </tr>            </table>        </div>    </div>    <div id="consigneesList" class="modalDialog">        <div style="width:600px;">            <a href="#registerClientForm" title="Close" class="close">X</a>            <table style="width:100%;" border=0 id="lst_consignees" >                <thead>                    <tr>                        <th>Name</th>                        <th>Country</th>                        <th>X</th>                    </tr>                </thead>                <tbody>                </tbody>            </table>        </div>    </div>    <div id="registerStoreForm" class="modalDialog">        <div style="width:600px;">            <a href="#close" title="Close" class="close">X</a>            <h1>STORE REGISTRATION</h1>            Username: <input type="text" id="txt_storeuser"> Password: <input type="password" id="txt_storepass"><br><br>            <table border=0 style="margin-left:20px; margin-top:20px; width:100%;">                <tr>                    <td><span>Full Name:</span></td><td> <input id="RegStoreName" type="text"></td>                    <td><span>Address:</span></td><td> <input  id="RegStoreAddress" type="text"></td>                </tr>                <tr>                    <td><span>Account #:</span></td><td> <input  id="RegStoreAccount" type="text"></td>                    <td><span>State:</span></td><td> <input  id="RegStoreState" type="text"></td>                </tr>                <tr>                    <td><span>Contact:</span></td><td> <input  id="RegStoreContact" type="text"></td>                    <td><span>Country:</span></td><td> <input  id="RegStoreCountry" type="text"></td>                </tr>                <tr>                    <td><span>Tel:</span></td><td> <input id="RegStoreTel"  type="text"></td>                    <td><span>Zip code:</span></td><td> <input  id="RegStoreZip"type="text"></td>                </tr>                <tr>                    <td><span>Cel:</span></td><td><input  id="RegStoreCel" type="text"></td>                    <td><span>Website:</span></td><td><input id="RegStoreWebsite" type="text"></td>                </tr>                <tr>                    <td><span>Email:</span></td><td> <input  id="RegStoreEmail" type="text"></td>                </tr>            </table>            <a href="#close"><button class="buttonCancel" id="btn_cancelStore">Cancel</button></a>            <button class="buttonOK" id="btn_regStore">Save</button>        </div>    </div>    <!--RECOVER ACCOUNT FORM-->    <div id="openModal" class="modalDialog">       <div>         <a href="#close" title="Close" class="close">X</a>            </br></br>                        <form method="post" action="/reset">                <p>                <label><font color="#35353C">Account E-mail:</font></label></br></br>                <input type="email" name="re_email" id="re_email" class="input" placeholder="e-mail" size="34" />                <input type="hidden" value="<%= company.get("companyLink") %>" name="companyLink">                </p>                </br>                <p class="submit">                 <input type="submit" name="wp-submit" id="wp-submit" class="btn btn-orange" value="Recover" />  &nbsp &nbsp<a href="#close" style="color:black;" >Cancel</a>                    </p>            </form>         </div>    </div>    <script>        if( window.location.href.indexOf("cloudbox.parseapp") !=-1 )            Parse.initialize("Slh0vzK6DCaarshvF1Vu0ku3Rx2hwDdTaYwW7DLU", "TkJgyQRuMqqKtzZ6bEjdESPiUZ6sVkg3QntIxmh7");        else            Parse.initialize("XEPryFHrd5Tztu45du5Z3kpqxDsweaP1Q0lt8JOb", "MDhb1hBngr2tx2v9TjyzoUhMcOFeWGJ56TWvChqi");        var consignees = [];                $("#btn_openClientRegForm").click(function(){                                $("#txt_user").val("");                $("#txt_pass").val("");                                $("#RegClientFullName").val("");                $("#RegClientAddress").val("");                $("#RegClientAccount").val("");                $("#RegClientState").val("");                $("#RegClientID").val("");                $("#RegClientCountry").val("");                $("#RegClientTel").val("");                $("#RegClientZip").val("");                $("#RegClientCel").val("");                $("#RegClientEmail").val("");                                            });                    $("#btn_addconsignee").click(function(){                                /* VERIFICAR CAMPOS VALIDOS */                if($("#FullnameMainClient").val() == "")                {                    alert("You must specify the Name of this consignee");                    return;                }                                var Clients = Parse.Object.extend("Clients");                var client = new Clients();                                client.set("Name", $("#FullnameMainClient").val() );                client.set("Address", $("#AddressMainClient").val() );                client.set("Telephone", $("#TelMainClient").val() );                /*client.set("Telephone2", $("#Tel2MainClient").val() );*/                client.set("Cellphone", $("#CelMainClient").val() );                client.set("State", $("#StateMainClient").val() );                client.set("Country", $("#CountryMainClient").val() );                client.set("Zip", $("#ZipMainClient").val() );                client.set("Company", {__type:"Pointer", className:"Companies", objectId:"<%=company.id%>"} );                                consignees.push(client);                                $("#consigneesCount").html(consignees.length.toString() );                                $("#lst_consignees > tbody").append("<tr><td>"+ $("#FullnameMainClient").val() +"</td><td>"+ $("#CountryMainClient").val() +"</td><td><i class='fa fa-trash-o'></i></td></tr>");                                                /* LIMPIAR CONTROLES */                $("#FullnameMainClient").val("");                $("#AddressMainClient").val("");                $("#TelMainClient").val("");                                $("#CelMainClient").val("");                $("#StateMainClient").val("");                $("#CountryMainClient").val("");                $("#ZipMainClient").val("");            });                $("#btn_cancelConsignee").click(function(){                /* LIMPIAR CONTROLES */                                                /* RESETEAR LISTA DE CONSIGNEES */                            });                $("#btn_regConsignee").click(function(){                if($("#txt_user").val() == "" || $("#txt_pass").val() == "")                {                    alert("User or pass is empty");                    return;                }                /* VALIDAR CAMPOS VALIDOS */                if($("#RegClientFullName").val() == "")                {                    alert("You must specify the Name of this consignee");                    return;                }                var Clients = Parse.Object.extend("Clients");                var client = new Clients();                client.set("Status", "Pending" );                client.set("Name", $("#RegClientFullName").val() );                client.set("Address", $("#RegClientAddress").val() );                client.set("Account", $("#RegClientAccount").val() );                client.set("AccountID", $("#RegClientID").val() );                client.set("Telephone", $("#RegClientTel").val() );                client.set("Cellphone", $("#RegClientCel").val() );                client.set("State", $("#RegClientState").val() );                client.set("Country", $("#RegClientCountry").val() );                client.set("Zip", $("#RegClientZip").val() );                client.set("Email", $("#RegClientEmail").val() );                client.set("IsShipper", $("#RegClientSHIP").is(':checked') );                client.set("IsConsignee", $("#RegClientCONS").is(':checked') );                client.set("Company", {__type:"Pointer", className:"Companies", objectId:"<%=company.id%>"} );                client.save({success: function(client){                        for(i in consignees)                        {                            consignees[i].set("MainClient", client);                        }                        /* SAVE THE SUBCONSIGNEES */                        Parse.Object.saveAll(consignees,{success:function(result){                                /* CREATE THE USER ACCOUNT */                                Parse.Cloud.run('regClient',                                    {user:$("#txt_user").val(), pass:$("#txt_pass").val(), clientID:client.id, companyID:"<%=company.id%>", companyLink:"<%= company.get("companyLink")%>"},                                    {                                        success: function(result){                                            window.location = "/pendingRegistration/<%=company.get("companyLink").toLowerCase()%>" ;                                        },                                        error: function(){                                            alert("Error al crear cuenta User");                                        }                                    });                            }});                    }, error:function(){                        alert("Error guardando clientes consignees");                    }});            });        $("#btn_regStore").click(function(){                if($("#txt_storeuser").val() == "" || $("#txt_storepass").val() == "")                {                    alert("User or pass is empty");                    return;                }                /* VALIDAR CAMPOS VALIDOS */                if($("#RegStoreName").val() == "")                {                    alert("You must specify the Name of this client Store");                    return;                }                var Agencies = Parse.Object.extend("Agencies");                var store = new Agencies();                store.set("Status", "Pending" );                store.set("Name", $("#RegStoreName").val() );                store.set("Address", $("#RegStoreAddress").val() );                store.set("Account", $("#RegStoreAccount").val() );                store.set("State", $("#RegStoreState").val() );                store.set("Contact", $("#RegStoreContact").val() );                store.set("Country", $("#RegStoreCountry").val() );                store.set("Telephone", $("#RegStoreTel").val() );                store.set("Zip", $("#RegStoreZip").val() );                store.set("Cel", $("#RegStoreCel").val() );                store.set("Website", $("#RegStoreWebsite").val() );                store.set("Email", $("#RegStoreEmail").val() );                store.set("Company", {__type:"Pointer", className:"Companies", objectId:"<%=company.id%>"} );                store.save({success: function(store){                        /* CREATE THE USER ACCOUNT */                        Parse.Cloud.run('regStore',                            {user:$("#txt_storeuser").val(), pass:$("#txt_storepass").val(), agencyID:store.id, companyID:"<%=company.id%>", companyLink:"<%= company.get("companyLink")%>"},                            {                                success: function(result){                                    window.location = "/pendingRegistration/<%=company.get("companyLink").toLowerCase()%>" ;                                },                                error: function(){                                    alert("Error al crear cuenta User");                                }                            });                    }, error: function(store, error){                        alert(error.message);                    }});            });        </script>														</body></html>