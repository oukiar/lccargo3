<div id="agency_warehouses"><div class="pull-right"></div><div class="row">    <div class="col-lg-12 col-md-12 container">        <div class="row">            <div class="col-md-6 col-xs-6" style="margin-top:13px;">                <div align="left">                    <b>Warehouse</b>                    <select  id="warehousefilter" name="warehousefilter">                        <option value="All">All</option>                    </select>                </div>            </div>                            <div class="col-md-6 col-xs-6" style="margin-top:10px;">                <div align="right">   <!-- FIXME, RENEW THIS ALGORITHM -->                    <label for="filterby" class="pfont">By:</label>                                   <select  id="filterby" name="filterby">                        <option value="All">All</option>                        <option value="Agent">Agent</option>                        <option value="Consignee">Client</option>                        <option value="ReceiptNum">Receipt#</option>                        <option value="Destination">Destination</option>                    </select>                    <!-- IF ALL OR DATE SELECTED THIS SEARCH INPUT IS NOT USE-->                    <input type="hidden" placeholder="Search"  id="searchtext" name="searchtext">                           <label class="pfont">Date:</label>                    <select id="filterdate" name="filterdate">                        <option value="All">All</option>                        <option value="Today">Today</option>                        <option value="Yesterday">Yesterday</option>                        <option value="This week">This week</option>                        <option value="This month">This month</option>                        <option value="Last month">Last month</option>	                        <option value="Current year">Current Year</option>                    </select>			                                        <button id="btn_search" class="pure-button pure-button-primary">Search</button>                                       </div>            </div>        </div>              <div class="panel">            <div class="panel-body">                <div id="warehousestable">                    <%include warehouses_dynamictable.ejs%>                </div>            </div>        </div>   <script>        /* LLENADO DINAMICO DE SELECT DE BODEGAS DE ESTA EMPRESA */        var query = new Parse.Query("Cellars");                query.equalTo("Company", {__type: "Pointer", className: "Companies", objectId: user.get("Company").id} );        query.ascending('createdAt');                query.find({            success:                 function(results)                {                    wareselect = document.getElementById("warehousefilter");                                        for(i in results)                    {                           wareselect.options[wareselect.options.length] = new Option(results[i].get("Name"), results[i].id);                    }                                    }            });        function update_table()        {            if($("#warehousefilter").val() == "All")                conditions = {containedIn:{"Status":["Repack","Received","NotProcessed"]}};            else                conditions = {containedIn:{"Status":["Repack","Received","NotProcessed"]},                                 equalTo:{Warehouse:{__type: "Pointer", className: "Cellars", objectId: $("#warehousefilter").val()} }};                                        InsertTable({                            cols:                                 {                                    "ReceiptNum":"",                                    "Agent":"",                                    "Consignee":{"Name":""},                                    "TotalBoxes":"",                                    "Destination":"",                                    "Transport":"",                                    "Volume":"",                                    "Warehouse":{"Name":""},                                    "ReceiptDate":"Date",                                },                                                        collection: "Receipts",                            by: "Shipper",                            value: {__type: "Pointer", className: "Agencies", objectId: agencyID},                            conditions: filter_conditions_with_dict({conditions:conditions}),                            like: filter_like(),                            document: "Staff/Agencies/profiles_partitions/warehouses_dynamictable",                            itemid: "warehouses_dynamictable"                        });                                               }        $("#btn_search").click(function(){                if($("#searchtext").val() == "")                {                    alert("Search text void, please enter keyword to find");                }                else                    update_table();            });                            $("#filterdate").change(function(){            /*alert(JSON.stringify(filter_conditions() ) );*/            update_table();        });          $("#filterby").change(function()            {                filterby_changed();     /* DEFAULT PARAMETERS ARE OK FOR STANDAR filterby, filterdate, etc */            });</script>				    </div>		</div>     		</div>