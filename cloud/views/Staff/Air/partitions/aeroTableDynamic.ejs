<div id="aeroTableDynamic">  <ul id="list"> <table class="table table-bordered" id="blueRow">	<style>	#not:nth-child(even) {background: white}	#not:nth-child(odd) {background: #FBFBFC}	</style> <tr>       <th>Receipt</th>	   <th>Client</th>       <th>Repack Price</th>       <th>Boxes</th>     <th>Content</th>	<th>Agent</th>	<th>Click to process</th> </tr> <% results.forEach(function(label){        %>		       <tr id="not">       <td><a onclick="showboxes('<%=label['objectId']%>')" href="#openReceiptBoxesRepack"><%= label["ReceiptNum"]%></a></td>       <td><%= label["Consignee"]%></td>       <td><%= label["Value"]%></td>       <td><%= label["TotalBoxes"]%></td>       <td><%= label["Content"]%></td>	   <td><%= label["Agent"]%></td>        <td align="center">            <a id="<%=label['objectId']%>" class="btn btn-orange btn-md myclass"> &nbsp; Process </a>          </td>             </tr>              <% }) %> </table>  </ul></div><script>    /* ESTA FUNCION INICIALIZA LOS BOXES DEL RECEIPT AL QUE SE LE DIO CLICK QUE SERAN MOSTRADOS EN EL MODALBOX */    function showboxes(objectId)    {        openedreceipt = objectId;        var q=new Parse.Query("Receipts");        q.get(openedreceipt, {success: function(receipt){                if(receipt.get("Status") == "Repack")                    $("#receiptBoxesRepack").html(receipt.get("ReceiptNum") );                else                    $("#receiptBoxes").html(receipt.get("ReceiptNum") );                        }});        var query = new Parse.Query("Boxes");                query.ascending('BoxNum');        query.include('Receipt');        query.include('PackedIn');        query.equalTo("Receipt", {__type: "Pointer", className: "Receipts", objectId: openedreceipt});                query.find({            success:                 function(results)                {                    var table = "";                                    if(results[0].get("Receipt").get("Status") == "Repack")                        table = "#boxes_Repacktable > tbody";                    else                        table = "#boxes_table > tbody";                                                $(table).html("");                                        results.forEach(function(box){                                                /* DEPENDIENDO DEL ESTADO DE LA CAJA */                        if(box.get("Status") == "Repacked")                        {                            row = "<tr bgcolor='#FFF5E7'><td>"+box.get("Status")+                                    " in receipt# <a onclick=\"showboxes('"+box.get("PackedIn").id+                                    "')\" href='#openReceiptBoxesRepack'>#"+ box.get("PackedIn").get("ReceiptNum") +                                    "</a></td><td>"+box.get("Length")+"</td><td>"+box.get("Width")+                                    "</td><td>"+box.get("Height")+"</td><td>"+box.get("Num")+"</td><td>"+                                    box.get("Weight")+"</td></tr>";                        }                        else if(box.get("Receipt").get("Status") == "Repack")                        {                            row = "<tr><td>"+box.get("Status")+"</td><td>"+box.get("Length")+                                    "</td><td>"+box.get("Width")+"</td><td>"+box.get("Height")+                                    "</td><td>"+box.get("Num")+"</td><td>"+box.get("RPrice")+"</td></tr>";                                                                                    }                           else    /* RECEIVED: THE NATURAL STATUS OF THE BOXES ON THE  RECEIPTS */                        {                            row = "<tr><td>"+box.get("Status")+"</td><td>"+box.get("Length")+                                    "</td><td>"+box.get("Width")+"</td><td>"+box.get("Height")+                                    "</td><td>"+box.get("Num")+"</td><td>"+box.get("Weight")+"</td></tr>";                        }                                                        /* SHIPMENT OF THIS BOX  ....   DISABLED                            if(box.get("Shipment") == "Aereal")                                row += "<td><select name='shiptype' id='"+box.id+"'><option>Pending</option><option selected>Aereal</option><option>Terrestral</option><option>Sea</option></select></td></tr>";                                                        else if(box.get("Shipment") == "Terrestral")                                row += "<td><select name='shiptype' id='"+box.id+"'><option>Pending</option><option>Aereal</option><option selected>Terrestral</option><option>Sea</option></select></td></tr>";                                                        else if(box.get("Shipment") == "Sea")                                row += "<td><select name='shiptype' id='"+box.id+"'><option>Pending</option><option>Aereal</option><option>Terrestral</option><option selected>Sea</option></select></td></tr>";                                                        else                                 row += "<td><select name='shiptype' id='"+box.id+"'><option>Pending</option><option>Aereal</option><option>Terrestral</option><option>Sea</option></select></td></tr>";                            */                                                $(table).append(row);                    });                }            });    }			    $(".myclass").click(function(){                        var Receipts = Parse.Object.extend("Receipts");                        var receipt = new Receipts();                        receipt.id = this.id;            receipt.set("Status", "Processed");                        receipt.save({              success: function(client) {                              /* mark the receipts of the boxes as processed */                var query = new Parse.Query("Boxes");                query.include("Receipt");                query.equalTo("PackedIn", receipt.id);                                query.find({                        success:                            function(result)                            {                                for(i in result)                                {                                    if(result[i].get("Receipt").get("TotalBoxes") == result[i].get("Receipt").get("PackedBoxes"))                                    {                                        result[i].get("Receipt").set("Status", "Processed");                                        result[i].get("Receipt").save();                                    }                                }                                                            },                        error:                            function()                            {                                                        }                    });                                    update_table();                                            },              error: function(client, error) {              }            });                    });</script>