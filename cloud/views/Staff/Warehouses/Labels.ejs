<!DOCTYPE html><html>    <head>		        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />        <meta charset="utf-8" />        <title>LC Cargo</title>        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />        <meta content="" name="description" />        <meta content="" name="author" />        <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Jura&amp;subset=all">       	   <!--ADMIN REQUIREMENTS-->     <% include ../../generals/ultraAdmin.ejs %>	            <script src="/cod/js/common.js"></script>        <script src="/cod/js/moment.js"></script>            <script src="/cod/js/jquery-1.11.2.min.js"></script>        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css" />        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>        <script src="http://yui.yahooapis.com/3.6.0/build/yui/yui-min.js"></script>        <script src="//www.parsecdn.com/js/parse-1.4.2.min.js"></script>	        </head>    <!-- END HEAD -->    <!-- BEGIN BODY -->    <body>		<!--START TOPBAR-->		 <% include ../../generals/topbar.ejs %>		         <!-- START CONTAINER -->        <div class="page-container row-fluid">        <!-- SIDEBAR - START -->		 <% include ../../generals/sideBar.ejs %>        <!--  SIDEBAR - END -->						            <!-- START CONTENT -->                     <section class="wrapper" style='margin-top:60px;display:inline-block;width:100%;padding:15px 0 0 15px;'>                            <div class='col-lg-12 col-md-12 col-sm-12 col-xs-12'>              <div class="page-title">              <div class="pull-left">		  			  <% include labelsMenu.ejs %>              <h1 class="title">Warehouse</h1>			            <div id="content">            <%include labels_partitions/table.ejs %>            </div>		      </div>              </div>              </div>            </section>            </section>            <!-- END CONTENT -->        </div><!-- END CONTAINER -->						<!-- MODAL TO CLASSIFY -->        <div id="openModal" class="modalDialog" >            <div>                <a id="btn_closeclassifydialog" href="#close" title="Close" class="close">X</a>                                <div style="position:relative; left:38%;">                    </br>                    <img src="/assets/images/divide.png" width="120" height="120" alt="Classify">                </div></br>                                    <div id="div_classify">                                        <select id="shipment" name="shipment"  style="width:500px; height:34px; font-size:21px;">                        <option value="Aereal">Aereal</option>                        <option value="Terrestral">Terrestral</option>                        <option value="Sea">Sea</option>                    </select>                    </br></br>                    <button id="btn_saveclassify" class="pure-button pure-button-primary">Save</button>                    <div id="classify_items"></div>                </div>            </div>        </div>		   		      		<!--MODAL PARA TRANSFERIR A BODEGA-->   	    <div id="openModalC" class="modalDialog">   	        <div>     		    <a href="#close" title="Close" class="close" id="btn_closeclassifydialog">X</a>     		   <div style="position:relative; left:38%;">     		    </br>     		    <img src="/assets/images/classify.png" width="120" height="120" alt="Classify">     		   </div>                 </br>                              <select id="waretransfer" name="waretransfer" style="width:500px; height:34px; font-size:21px;">                       <option value="-">Select the warehouse</option>                       <option value="Los Angeles">Los Angeles</option>                       <option value="Miami">Miami</option>                   </select>                </br></br>     		   <button id="btn_savetrans" class="pure-button pure-button-primary">Transfer</button>                <div id="transfersection"></div>                      </div>   	    </div>				<!--MODAL PARA ELIMINAR LABELS-->	    <div id="openModalE" class="modalDialog">	        <div>	            <a href="#close" title="Close" class="closeB">X</a>	            <div id="modalDeleteItems">                    <h1>Deleting labels:</h1><br>	            </div>                                <br><br><button id="btn_dodelete">Delete !</button>	        </div>	    </div>						<!--MODAL PARA MOSTAR LABEL-->	    <div id="openModalB" class="modalDialogB">	        <div>	            <a href="#close" title="Close" class="closeB">X</a>	            <div id="repack_form">				<% include labels_partitions/labelform.ejs %>	            </div>	        </div>	    </div>								    </div>    <!-- LOAD FILES AT PAGE END FOR FASTER LOADING -->    <%include ../../generals/endFiles.ejs%><script>    Parse.initialize("XEPryFHrd5Tztu45du5Z3kpqxDsweaP1Q0lt8JOb", "MDhb1hBngr2tx2v9TjyzoUhMcOFeWGJ56TWvChqi");                function update_table()        {                    if($("#warehousefilter").val() == "All")                conditions = {containedIn:{"Status":["Repack","Received","NotProcessed"]}};            else                conditions = {containedIn:{"Status":["Repack","Received","NotProcessed"]},                                 equalTo:{Warehouse:$("#warehousefilter").val()}};                                            InsertTable({                    cols:   /*Columnas definidas FIELD:TITLE or FIELD:{FIELDNEEDED:FIELDTITLE}*/                         {                                                        "Receipt":"",                            "Consignee":{"Name":""}, /*This is the sintax for return fields of pointers showed on table*/                            "Shipper":{"Name":""}, /*This is the sintax for return fields of pointers showed on table*/                            "Invoice":"",                            "ReceiptDate":"",                            "Country":"",                            "Transport":"",                            "Warehouse":"",			                "Shipment":"",			                "Status":"",                            "objectId":""                        },                                            /* AL PASAR EL PARAMETRO COLLECTION INDICAMOS QUE NECESITAMOS BUSQUEDA CON LISTA DE RESULTADOS */                    collection: "Warehouses", /* COLLECCION PRINCIPAL */                                        /* CONDICIONES */                    conditions: filter_conditions_with_dict({                                                conditions:conditions                                                }),                                        /*BUSQUEDA DE SEARCH TIPO LIKE*/                    like: filter_like(),                                        document: "Staff/Warehouses/labels_partitions/dynamictable",                    itemid: "ware_table"                });                }    $("#btn_saveclassify").click(        function()        {            var shipment = $("#shipment").val();                                    $("#div_classify").replaceWith("<div id='div_classify'>New shipment classification: " + shipment + "<br></div>");                        checkboxes = document.getElementsByName("checkship");                        for(i in checkboxes)            {                if(checkboxes[i].checked)                {                            /*                    var ObjClass = Parse.Object.extend("Warehouses");                    var obj = new ObjClass();                                        obj.id = checkboxes[i].id;                    obj.set("Status", "NotProcessed");                    obj.set("Shipment", $("#shipment").val());                    obj.save();                                    $("#div_classify").append("Classified: " + checkboxes[i].id + "<br>");                    */                                        wh = JSON.parse(checkboxes[i].id);                                    var str = "Saving receipt: " + wh["Receipt"] + " <img id='save-" + wh["objectId"] + "' src='/web/img/icons/loader_grey.gif' width=16 height=16><br>";                                                                    $("#div_classify").append( str );                                        kwargs = {                                collection:"Warehouses",                                 objectId: wh["objectId"],                                values:{Status:"NotProcessed", "Shipment":shipment}                            };                                                                                           $.post("/update",                         kwargs,                         function(data)                        {                            kwargs = JSON.parse(data);                            $("#save-" + kwargs["objectId"]).replaceWith("SAVED");                        }                    );                                    }            }                        $("#div_classify").append("<a id='btn_doneclassifydialog' href='#close' class='pure-button pure-button-primary'>Done</a>");             $("#btn_doneclassifydialog").click(function(){                    update_table();                                            /* RESET THE STATE OF THE CONTROLS */                    $("#classifyDiv").css("display", "block");                    $("#shipoptions").css("display", "none");                    $(".checkship").css("display", "none");                    $("#classifycolumn").css("display", "none");                                    });        });    $("#btn_closeclassifydialog").click(function(){        update_table();    });        /* TRANSFER BETWEEN WAREHOUSES */    $("#btn_savetrans").click(function(){                    var warehouse = $("#waretransfer").val();            $("#transfersection").replaceWith("<img id='transfersection' src='/web/img/icons/loader_grey.gif'>");                    $.post("/update", {collection:"Warehouses",                     objectId:transferId,                     values:{"Status":"TransferOut:"+warehouse}},                     function(data){                        $("#transfersection").replaceWith("DONE !");                                                update_table();                                                });                      });        $("#btn_save").click(    function()    {           alert("SAVE?");        return;    });        /* CODE FOR THE LABELFORM */    $("#ReceiptDate").datepicker();                                            var totalrows = 1;                                            $( "#btn_addbox" ).click(                function()                {                                        totalrows += 1;                                         var newrow = "<div class=\"cont-106\">";                    var beforestr0 = "<div class=\"colwrapper-60\"><div class=\"cont-107\"><input type=\"text\" name=\"";                    var beforestr1 = "<div class=\"colwrapper-61\"><div class=\"cont-107\"><input type=\"text\" name=\"";                    var beforestr2 = "<div class=\"colwrapper-62\"><div class=\"cont-107\"><input type=\"text\" name=\"";                    var beforestr3 = "<div class=\"colwrapper-63\"><div class=\"cont-107\"><input type=\"text\" name=\"";                    var beforestr4 = "<div class=\"colwrapper-64\"><div class=\"cont-107\"><input type=\"text\" name=\"";                    var afterstr = "\" class=\"input-35\"></div></div>";                    newrow += beforestr0 + "Length-" + totalrows.toString() + "\" id=\"Length-" + totalrows.toString() + afterstr;                    newrow += beforestr1 + "Width-" + totalrows.toString() + "\" id=\"Width-" + totalrows.toString() + afterstr;                    newrow += beforestr2 + "Height-" + totalrows.toString() + "\" id=\"Height-" + totalrows.toString() + afterstr;                    newrow += beforestr3 + "Weight-" + totalrows.toString() + "\" id=\"Weight-" + totalrows.toString() + afterstr;                    newrow += beforestr4 + "Boxes-" + totalrows.toString() + "\" id=\"Boxes-" + totalrows.toString() + afterstr;                                                        newrow += "</div>";                    $(newrow).appendTo("#dyntable");                });    $("#btn_dodelete").click(        function(){                        checkboxes = document.getElementsByName("checkdelete");                        var bdel = false;                        for(i in checkboxes)            {                if(checkboxes[i].checked)                {                    wh = JSON.parse(checkboxes[i].id);                                            $("#delete-" + wh["objectId"]).replaceWith("<img id='delete-" + wh["objectId"] + "' src='/web/img/icons/loader_grey.gif' width=16 height=16>");                                        $.post("/deleterow",                             {collection:"Warehouses", "objectId":wh["objectId"]},                            function(data)                            {                                res = JSON.parse(data);                                $("#delete-" + res["objectId"]).replaceWith("  DELETED");                                                            });                }            }                        $("#btn_dodelete").replaceWith("<a href='#close' id='btn_closedelete' class='pure-button pure-button-primary'> CLOSE </a>");                        update_table();                        				$("#deleteDiv").css("display", "block");				$("#deleteconfirmDiv").css("display", "none");				$(".checkdelete").css("display", "none");				$("#deletecolumn").css("display", "none");                    });        </script>	            <!-- modal end -->    </body></html>