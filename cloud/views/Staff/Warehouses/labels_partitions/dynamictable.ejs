<div id="ware_table">    <table class="table table-bordered" id="blueRow">		<style>		#not:nth-child(even) {background: white}		#not:nth-child(odd) {background: #FBFBFC}		</style>    <tr>            <th>Rcpt.</th>            <th>Client</th>            <th>Shipper</th>            <th style="display:none;">Invoice</th>            <th>                <select  id="DateSelect">                    <option value="Date" <%if(params["cols"]["ReceiptDate"]=="Date"){%>selected<%}%> >Date</option>                    <option value="Days" <%if(params["cols"]["ReceiptDate"]=="Days"){%>selected<%}%> >Days</option>                </select>            </th>            <th>Country</th>            <th>Shipment</th>            <th>WareHouse</th>            <th id="classifycolumn" style="display:none">Ship</th>            <th id="deletecolumn" style="display:none">Delete</th>    </tr>    <% results.forEach(function(label){%>			 <tr style="" id="not">			 <td>                <a class=" pop" data-container="body" data-toggle="popover" data-placement="right" data-content="                    <a href='#openModalB' onclick=&quot;fillEditable('<%=label['objectId']%>')&quot;>Edit Receipt</a></br>                    <a  href='#openModalR'onclick=&quot;fillPrintReceipt('<%=label['objectId']%>')&quot;>Print Receipt</a></br>                    <a onclick=&quot;fillLabel('<%=label['objectId']%>')&quot; href='#openModalP'>Print Label</a></br>                    <a href='#openModalB'>Email</a></br>                    <a href='#openModalB'>Receipt Log</a></br>"                        data-original-title="" title="" style="cursor:crosshair">                          <b><%= label["Receipt"]%></b>                </a>						</td>						            <td><%= label["Consignee"]%></td>            <td><% if(typeof label["Shipper"] != "undefined"){%> <%=label["Shipper"]%><%}%></td>            <td style="display:none;"><%= label["Invoice"]%></td>            <td><%= label["ReceiptDate"] %></td>            <td><%= label["Country"]%></td>		     <td><a onclick="wareclassify('<%=label['objectId']%>', '<%=label['Receipt']%>')" href="#openModal"><b><%= label["Shipment"]%></b></a></td>            <td><a onclick="opentransfer('<%=label['objectId']%>')" href="#openModalC"><b><%= label["Warehouse"]%></b></a></td>		            <td style="display:none" class="checkship"><input name="checkship" id="<%=JSON.stringify({objectId:label['objectId'], Receipt:label['Receipt']})%>" type="checkbox"></td>            <td style="display:none" class="checkdelete"><input name="checkdelete" id="<%=JSON.stringify({objectId:label['objectId'], Receipt:label['Receipt']})%>" type="checkbox"></td>						 </tr>		    <% }) %>       </table></div><script>    var wareEditing = -1;    function fillEditable(objectId)    {        /* ALMACENAR EL ID DEL LABEL QUE SE ESTA EDITANDO */        wareEditing = objectId;            var query = new Parse.Query("Warehouses");        query.descending('createdAt');        query.include("Company");                        query.get(objectId, {            success:                 function(object)                {                    $("#Agent_E").val( object.get("Agent") );                    $("#Receipt_E").val( object.get("Receipt") );                    $("#ReceiptDate_E").val( moment( object.get("ReceiptDate") ).format("MM[/]DD[/]YYYY") );                    $("#Transport_E").val( object.get("Transport") );                    $("#Warehouse_E").val( object.get("Warehouse").id );                    $("#Country_E").val( object.get("Country") );                    $("#Prices_E").val( object.get("Prices") );                    $("#ExtraCost_E").val( object.get("ExtraCost") );                    $("#Invoice_E").val( object.get("Invoice") );                    $("#Weight_E").val( object.get("Weight") );                    $("#WeightVol_E").val( object.get("WeightVol") );                    $("#Value_E").val( object.get("Value") );                    $("#Volume_E").val( object.get("Volume") );                    $("#Zone_E").val( object.get("Zone") );                    $("#Content_E").val( object.get("Content") );                    $("#GeneralNotes_E").val( object.get("GeneralNotes") );                    $("#InternalNotes_E").val( object.get("InternalNotes") );                                        /* LLENAR BOXES */                    var nrows = 1;                    boxes = JSON.parse(object.get("Boxes"));                                        for(box in boxes)                    {                                                if(typeof $("#Length-"+nrows.toString() + "_E" ).val() == "undefined" )                        {                            $( "#btn_addbox_E" ).trigger("click");                        }                                                $("#Length-"+nrows.toString() + "_E").val(boxes[box]["length"]);                        $("#Width-"+nrows.toString() + "_E").val(boxes[box]["width"]);                        $("#Height-"+nrows.toString() + "_E").val(boxes[box]["height"]);                        $("#Weight-"+nrows.toString() + "_E").val(boxes[box]["weight"]);                        $("#Boxes-"+nrows.toString() + "_E").val(boxes[box]["boxes"]);                                                nrows += 1;                    }                                                        }            });                    }                            function fillPrintReceipt(objectId)    {        var query = new Parse.Query("Warehouses");        query.descending('createdAt');        query.include("Company");        query.include("Shipper");        query.include("Consignee");                query.get(objectId, {            success:                 function(object)                {                                        $("#NumReceipt").html(object.get("Receipt") );                    $("#DateReceipt").html(object.get("ReceiptDate") );                    $("#ConsigneeReceipt").html(object.get("Consignee").get("Name") );                    $("#ConsigneeAddrReceipt").html(object.get("Consignee").get("Address") );                    $("#DestReceipt").html(object.get("Consignee").get("Destination") );                    $("#CountryReceipt").html(object.get("Consignee").get("Country") );                    $("#PriceReceipt").html(object.get("Value") );                                        if(typeof object.get("Shipper") != "undefined")                    {                        $("#ShipperReceipt").html(object.get("Shipper").get("Name") );                        $("#AddrReceipt").html(object.get("Shipper").get("Address") );                    }                                                            /* FILL BOXES */                                        boxes = JSON.parse(object.get("Boxes") );                                        var str = "";                    var totalpieces = 0;                    var totalweight = 0;                    var totalweightvolume = 0;                    var totalvolume = 0;                                        for(i in boxes)                    {                           str += "<tr>\                            <td>" + boxes[i]["length"] + "</td>\                            <td class='text-center'>" + boxes[i]["width"] + "</td>\                            <td class='text-center'>" + boxes[i]["height"] + "</td>\                            <td class='text-right'>" + boxes[i]["boxes"] + "</td>\                            <td class='text-right'>" + boxes[i]["weight"] + "</td>";                                                    /* si es el primer elemento */                        if(i == 0)                        {                            str += "<td>" + object.get("GeneralNotes") + "</td></tr>";                        }                        else                        {                            str += "<td></td></tr>";                        }                                                /* SUM */                        totalpieces += boxes[i]["boxes"];                        totalweight += boxes[i]["weight"];                        /*totalweightvolume += boxes[i]["boxes"];*/                        totalvolume += boxes[i]["boxes"];                    }                                        $("#BoxesReceipt").html(str);                                        /* FILL TOTALS */                    $("#TotalPieces").html(object.get("Prices"));                    $("#TotalWeight").html(object.get("Weight"));                    $("#TotalWeightVol").html(object.get("WeightVol"));                    $("#TotalVolume").html(object.get("Volume"));                                        $("#UserReceipt").html(user.get("Name"));                    $("#PrintedReceipt").html(moment( new Date() ).format("MM[/]DD[/]YYYY"));                                                        }            });            }    function fillLabel(objectId)    {            var query = new Parse.Query("Warehouses");        query.descending('createdAt');        query.include("Company");        query.include("Shipper");        query.include("Consignee");                query.get(objectId, {            success:                 function(object)                {                        $("#CompanyLabel").html(object.get("Company").get("name") );                    $("#DestinationLabel").html(object.get("Country") );                    $("#WeightLabel").html(object.get("Weight") );                    $("#WeightVolLabel").html(object.get("WeightVol") );                    $("#VolumeLabel").html(object.get("Volume") );                    /*$("#LengthLabel").html(object.get("Country") );*/                    $("#WidthLabel").html(object.get("Width") );                    $("#HeightLabel").html(object.get("Height") );                    $("#ConsigneeLabel").html(object.get("Consignee").get("Name") );                    $("#BoxLabel").html(object.get("Prices") );                    $("#ZoneLabel").html(object.get("Zone") );                                        if(typeof object.get("Shipper") != "undefined")                        $("#ShipperLabel").html(object.get("Shipper").get("Name") );                                            new QRCode(document.getElementById("qrcodeLabel"),                                  {                                    text: object.id,                                    width: 128,                                    height: 128,                                    colorDark : "#000000",                                    colorLight : "#ffffff",                                    correctLevel : QRCode.CorrectLevel.H                                });                }            });            }    $("#DateSelect").change(function(){            update_table();        });    transferId = -1;    function opentransfer(objectId)    {        transferId = objectId;    }        classifyId = -1;    function wareclassify(objectId, Receipt)    {        classifyId = objectId;        classifyReceipt = Receipt;    }    function wareceipt(objectId)    {            $.post("/getby",                 {by:"objectId", value:objectId, classvar:"Warehouses"},                 function(data){                                    wh = JSON.parse(data);                                        $("#qrcode").replaceWith("<div id='qrcode'></div>");                    new QRCode(document.getElementById("qrcode"), wh["objectId"] );                                        $("#Receipt").val(wh["Receipt"]);                    $("#ReceiptDate").val(moment(wh["ReceiptDate"]).format("MM[/]DD[/]YYYY") );                    $("#Agent").val(wh["Agent"]);                    $("#Transport").val(wh["Transport"]);                    $("#Warehouse").val(wh["Warehouse"]);                    $("#Country").val(wh["Country"]);                    $("#Prices").val(wh["Prices"]);                    $("#Weight").val(wh["Weight"]);                    $("#WeightVol").val(wh["WeightVol"]);                    $("#Volume").val(wh["Volume"]);                    $("#ExtraCost").val(wh["ExtraCost"]);                    $("#Invoice").val(wh["Invoice"]);                    $("#Value").val(wh["Value"]);                    $("#Zone").val(wh["Zone"]);                    $("#Content").val(wh["Content"]);                    $("#GeneralNotes").val(wh["GeneralNotes"]);                    $("#InternalNotes").val(wh["InternalNotes"]);                                                            var nrows = 1;                    boxes = JSON.parse(wh["Boxes"]);                                        for(box in boxes)                    {                                                if(typeof $("#Length-"+nrows.toString() ).val() == "undefined" )                        {                            $( "#btn_addbox" ).trigger("click");                        }                                                $("#Length-"+nrows.toString() ).val(boxes[box]["length"]);                        $("#Width-"+nrows.toString() ).val(boxes[box]["width"]);                        $("#Height-"+nrows.toString() ).val(boxes[box]["height"]);                        $("#Weight-"+nrows.toString() ).val(boxes[box]["weight"]);                        $("#Boxes-"+nrows.toString() ).val(boxes[box]["boxes"]);                                                nrows += 1;                    }                                                                            });    }    $("#btn_classify").click(        function()        {            $("#classifycolumn").css("display", "block");			$("#classifyDiv").css("display", "none");            $("#shipoptions").css("display", "block");			$("#deleteDiv").css("display", "none");                        $(".checkship").css("display", "block");        });                    $("#btn_back").click(			function(){				$("#classifyDiv").css("display", "block");				$("#shipoptions").css("display", "none");				$(".checkship").css("display", "none");				$("#classifycolumn").css("display", "none");				$("#deleteDiv").css("display", "");							});		    $("#btn_delete").click(        function()        {            $("#deletecolumn").css("display", "block");			$("#deleteDiv").css("display", "none");            $("#deleteconfirmDiv").css("display", "block");            $("#classifyDiv").css("display", "none");            $(".checkdelete").css("display", "block");        });            $("#btn_deleteconfirm").click(function(){                        checkboxes = document.getElementsByName("checkdelete");                        $("#modalDeleteItems").replaceWith("<div id='modalDeleteItems'></div>");                                            var bdel = false;                        for(i in checkboxes)            {                if(checkboxes[i].checked)                {                                            wh = JSON.parse(checkboxes[i].id);                                    str = "<b>Receipt: " + wh["Receipt"] + "<div id='delete-" + wh["objectId"] + "'></div></b><br>";                    $("#modalDeleteItems").append(str);                    bdel = true;                }            }                                    if(bdel == false)            {                alert("You must select almost one label");                return false;            }        });                            $("#btn_deletecancel").click(			function(){				$("#deleteDiv").css("display", "block");				$("#deleteconfirmDiv").css("display", "none");				$(".checkdelete").css("display", "none");				$("#deletecolumn").css("display", "none");				$("#classifyDiv").css("display", "");							});							 </script>