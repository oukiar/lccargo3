<div class="col-md-6 col-xs-6" style="margin-top:8px; margin-top:8px; width:100%; min-width: 850px;">    <div class="panel">            <table style="display:inline; position:relative; top:13px;">             <tr>                <th style="text-align: center;">Warehouse</th>                <th style="text-align: center;"><label for="filterby" class="pfont">By:</label></th>                <th></th>                <th style="text-align: center;"><label class="pfont">Date:</label></th>            </tr>            <tr>                <td style="padding: 13px;">                    <select  id="warehousefilter" name="warehousefilter">                        <option value="All">All</option>                    </select>                </td>                              <td style="padding: 8px;">                    <select  id="filterby" name="filterby">                    <option value="All">All</option>                    <option value="Shipper">Store</option>                    <option value="Consignee">Client</option>                    <option value="ReceiptNum">Receipt #</option>                    <option value="Destination">Destination</option>                </select>                </td>                                <td style="padding: 5px;">                     <!-- IF ALL OR DATE SELECTED THIS SEARCH INPUT IS NOT USE-->                    <input type="hidden" placeholder="Search"  id="searchtext" name="searchtext">                </td>                                 <td style="padding: 8px;">                <select id="filterdate" name="filterdate">                     <option value="">All</option>					 <option value="DateRange">Date Range</option>                     <option value="Today">Today</option>                     <option value="Yesterday">Yesterday</option>                     <option value="This week">This week</option>                     <option value="This month">This month</option>                     <option value="Last month">Last month</option>	                     <option value="Current year">Current Year</option>                </select>	                </td>						  <td style="padding: 8px;">					  <input type="text" id="fromdate" style="display:none;" size="13">				  </td>				    <td style="padding: 8px;">						<input type="text" id="todate" style="display:none;" size="13">					</td>                              <td style="padding: 8px;">                    <button id="btn_search" class="pure-button pure-button-primary">Search</button>                </td>                <td style="padding: 8px;">                    <!--<a class="pure-button" href='#openModalNR'><font color="#677A85">New Receipt</font></a>-->                    <a class="pure-button" href='/staff_NewLabel'><font color="#677A85">New Receipt</font></a>                </td>                            <!--                <td id="classifyDiv" style="padding: 8px;">                    <button id="btn_classify" class="pure-button pure-button-primary" style="background:#E08566;">Classify Shipment</button>                </td>                -->                           <td id="shipoptions" style="display:none; padding: 8px; white-space:nowrap;" >                    <button id="btn_back" class="pure-button pure-button-primary" style="background:#E08566;">Cancel</button>                    <a class="pure-button pure-button-primary" id="btn_accept" href="#openModal">Select mode</a>                </td>                                <td id="printDiv" style="padding: 8px;">                    <a href="#openModalPrint" class="pure-button"><font color="#52646F"><i class="fa fa-print"></i></font></a>                </td>                <td id="deleteDiv" style="padding: 8px; width:100%;">                    <button id="btn_delete" class="pure-button"><i class="fa fa-trash-o"></i></button>                </td>	                     <td id="deleteconfirmDiv" style="display:none; padding: 8px; white-space:nowrap;">                    <button id="btn_deletecancel" class="pure-button pure-button-primary" style="background:#E08566;">Cancel</button>	                       <a class="pure-button pure-button-primary" id="btn_deleteconfirm" href="#openModalE">Delete</a>                </td>            </tr>        </table>            <div class="panel-body">            <ul id="list">              <%include dynamictable.ejs %>            </ul>        </div>    </div></div>    <script>    $("#btn_print").click(function(){                            var query = new Parse.Query("Receipts");                        query.include("Shipper");            query.include("Consignee");            query.include("Warehouse");                        /* WAREHOUSE FILTER */            if($("#warehousefilter").val() != "All")                query.equalTo("Warehouse", {__type: "Pointer", className: "Cellars", objectId: $("#warehousefilter").val()});                        /* COMPANY */            query.equalTo("Company", {__type: "Pointer", className: "Companies", objectId: user.get("Company").id});                        /* SECTION CONDITIONS ... RECEIPT LIST IN THIS CASE */            query.containedIn("Status", ["Received","NotProcessed"]);                            /* FILTERBY */            if($("#filterby").val() != "All")            {                switch($("#filterby").val())                {                    case "Shipper":                                            break;                    case "Consignee":                                            break;                    case "ReceiptNum":                                            break;                    case "Destination":                                            break;                }            }                        /* FILTER DATE */            if($("#filterdate").val() != "All")            {                if($("#filterdate").val() == "DateRange")                {                    var begindate = new Date($("#fromdate").val() );                    var enddate = new Date($("#todate").val() );                                        query.greaterThanOrEqualTo('ReceiptDate', moment( begindate ).format("YYYYMMDD"));                    query.lessThanOrEqualTo('ReceiptDate', moment( enddate).format("YYYYMMDD"));                                    }                else                {                    clientDateConditions(query);                }            }                        query.find({success: function(results){                                var doc = new jsPDF('p', 'mm', [216, 279]);                                        doc.setFontSize(14);                                        /* COMPANY */                    doc.text(5, 0, user.get("Company").get("name") );                                        doc.setFontSize(8);                                        doc.text(5, 10, "Rcpt." );                    doc.text(15, 10, "Client" );                    doc.text(45, 10, "Shipper" );                    doc.text(75, 10, "Repacked" );                    doc.text(90, 10, "Boxes" );                    doc.text(100, 10, "Weight" );                    doc.text(110, 10, "Date" );                    doc.text(125, 10, "Destination" );                    doc.text(165, 10, "Warehouse" );                                        colsizes = [40,50,15,10,10,20,40,10,20];                    colindex = 0;                                        var x = 0;                    var y = 20;                    var offset = 40;                    var yoffset = 7;                                            for(i in results)                    {                        /*alert( results[i].get("ReceiptNum") );*/                                                doc.text(5, y, results[i].get("ReceiptNum").toString() );                                                if(typeof(results[i].get("Consignee") ) != "undefined")                            doc.text(15, y, results[i].get("Consignee").get("Name") );                                                    if(typeof(results[i].get("Shipper") ) != "undefined")                            doc.text(45, y, results[i].get("Shipper").get("Name") );                                                    doc.text(75, y, results[i].get("PackedBoxes").toString() );                        doc.text(90, y, results[i].get("TotalBoxes").toString() );                        doc.text(100, y, results[i].get("Weight") );                        doc.text(110, y, results[i].get("ReceiptDate") );                        doc.text(125, y, results[i].get("Destination") );                                                if(typeof(results[i].get("Warehouse") ) != "undefined")                            doc.text(165, y, results[i].get("Warehouse").get("Name") );                                                y += yoffset;                                                if(y > 260)                        {                            y = 20;                            doc.addPage();                        }                    }                                        /* REAL PRINT */                    var blob = doc.output("blob");                                        win = window.open(URL.createObjectURL(blob));                    win.print();                                    }});        });    $("#btn_search").click(function(){            if($("#searchtext").val() == "" && $("#filterby").val() != "All")            {                alert("Search text void, please enter keyword to find");            }            else                update_table();        });    $("#warehousefilter").change(function(){        update_table();    });            $("#filterdate").change(function(){        if($("#filterdate").val() == "DateRange")        {            $("#fromdate").show();            $("#todate").show();                        $("#fromdate").datepicker();            $("#todate").datepicker();        }        else        {            $("#fromdate").hide();            $("#todate").hide();        }    });              $("#filterby").change(function(){        filterby_changed();    });        $("#btn_accept").click(        function()        {            checkboxes = document.getElementsByName("checkship");                        for(i in checkboxes)            {                if(checkboxes[i].checked)                {                            return true;                }            }                        alert("You must select almost one label");            return false;        });    function printLabel2(objectId)    {                   return;            var q = new Parse.Query("Receipts");                q.equalTo("objectId", objectId);                q.include("Company");        q.include("Shipper");        q.include("Consignee");        q.include("Usr");        q.first({success: function(receipt){                                               for(i=0; i<results.length; i++)                {                    box = results[i];                                        $("#myqrcode").qrcode({text: box.id, render:"canvas", size:100});                                        w = document.getElementById("myqrcode");                    console.log(w);                                        var qrcodedata = w.firstChild.toDataURL("image/png");                                        w.removeChild(w.firstChild);                                                        if(i > 0)                        doc.addPage();                                            doc.setDrawColor(0);                    doc.setFillColor(255, 255, 255);                    doc.roundedRect(20, 20, 392, 248, 5, 5, 'FD');                                     doc.setFontSize(18);                                        /* COMPANY */                    doc.text(170, 50, receipt.get("Company").get("name") );                                        /* RECEIPT INFORMATION */                    receiptInfo = "# " + receipt.get("ReceiptNum") + " - " + receipt.get("Destination");                    doc.text(170, 80, receiptInfo);                                        doc.setFontSize(10);                                        /* HEAD TABLE */                    headTable = 'Length   Width   Height   Volume  Weight-Vol  Weight';                    doc.text(160, 120, headTable);                                        doc.setFontSize(8);                                        /* BOX SIZE WEIGHT, ETC */                    if(typeof(box.get("Length")) != "undefined" && box.get("Length") != "" )                        doc.text(165, 135, parseFloat(box.get("Length")).toFixed(2) );                                        if(typeof(box.get("Width")) != "undefined" && box.get("Width") != "" )                        doc.text(202, 135, parseFloat(box.get("Width")).toFixed(2) );                                        if(typeof(box.get("Height")) != "undefined" && box.get("Height") != "" )                        doc.text(238, 135, parseFloat(box.get("Height")).toFixed(2) );                                        if(typeof(receipt.get("Volume")) != "undefined" && receipt.get("Volume") != "" )                        doc.text(280, 135, parseFloat(receipt.get("Volume")).toFixed(2) );                                        if(typeof(receipt.get("WeightVol")) != "undefined" && receipt.get("WeightVol") != "" )                        doc.text(320, 135, parseFloat(receipt.get("WeightVol")).toFixed(2) );                                        if(typeof(box.get("Weight")) != "undefined" && box.get("Weight") != "" )                        doc.text(370, 135, parseFloat(box.get("Weight")).toFixed(2) );                                        doc.setFontSize(10);                                                                                /* SHIPPER */                    doc.text(50, 160, "Shipper:");                    doc.text(50, 170, receipt.get("Shipper").get("Name") );                                        /* ZONE */                    doc.text(50, 190, "Zone:");                    doc.text(50, 200, receipt.get("Zone") );                                                            /* TIME */                    doc.text(50, 220, "Time:");                    doc.text(50, 230, moment( receipt.get("ReceiptHour") ).format("MM[/]DD[/]YYYY  h:mm:ss") );                                        /* CONSIGNEE */                    doc.text(270, 160, "Consignee:");                    doc.text(270, 170, receipt.get("Consignee").get("Name") );                                                            /* RECEIPT BY */                    doc.text(270, 190, "Receipt by:");                    if(typeof(receipt.get("Usr").get("Name")) != "undefined" )                        doc.text(270, 200, receipt.get("Usr").get("Name") );                    else                        doc.text(270, 200, receipt.get("Usr").get("StaffId").get("Name") );                                                                                        /* BOX NUMBER */                    doc.text(270, 220, "Box:");                    if(typeof box.get("Num") != "undefined")                        doc.text(270, 230, box.get("Num"));                                                            /* FOOTER MESSAGE */                    advert = "ALL CARGO IS SUBJECT TO INSPECTION";                    doc.text(calc_offset(doc, advert, 12), 260, advert);                                                                                                                             doc.addImage(qrcodedata, 'PNG', 30, 30, 100, 100);                                                                                /* LOGOTIPO DE SEGURIDAD */                    /*doc.addImage(logosec, 'PNG', 50, 235, 28, 28);*/                                                                                                                    if(i == results.length-1)                    {                        if(navigator.userAgent.indexOf("AppleWebKit") > -1)                        {                            doc.autoPrint();                            doc.output('dataurlnewwindow');                        }                        else                        {                            var blob = doc.output("blob");                            win = window.open(URL.createObjectURL(blob));                            win.print();                        }                    }                                }                                    }});    }    </script>									  