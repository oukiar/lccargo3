<!doctype html><html lang="en">    <head>                <meta http-equiv="content-type" content="text/html;charset=UTF-8" />        <meta charset="utf-8" />        <title>LC Cargo</title>        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />        <meta content="" name="description" />        <meta content="" name="author" />        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=VT323|Jura|EB+Garamond&amp;subset=all">        <link rel="stylesheet" href="cod/css/styleWareHouse.css">        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">        <script src="//code.jquery.com/jquery-1.10.2.js"></script>        <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>        <link rel="stylesheet" href="/resources/demos/style.css">        <script src="//www.parsecdn.com/js/parse-1.4.2.min.js"></script>                <!-- QR CODE GENERATOR -->        <script type="text/javascript" src="/cod/js/jquery.qrcode.js"></script>        <script type="text/javascript" src="/cod/js/qrcode.js"></script>                <script src="/cod/js/moment.js"></script>                        <script src="/cod/js/base64.min.js"></script>        <script src="/cod/js/jspdf.min.js"></script>        <script src="https://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"></script>        <script src="cod/js/jquery.geocomplete.js"></script>                <!--ADMIN REQUIREMENTS-->           <% include ../../generals/ultraAdmin.ejs %>            <script src="/cod/js/common.js"></script>        		<script>				function showClient(){			$("#newLabelForm").css('display', 'none');			$("#registerClient").css('display', '');			$("#registerStore").css('display', 'none');				}				function hideClient(){			$("#newLabelForm").css('display', '');			$("#registerClient").css('display', 'none');			$("#registerStore").css('display', 'none');				}						function hideStore(){			$("#newLabelForm").css('display', '');			$("#registerClient").css('display', 'none');			$("#registerStore").css('display', 'none');			}						function showStore(){			$("#newLabelForm").css('display', 'none');			$("#registerClient").css('display', 'none');			$("#registerStore").css('display', '');			}								</script>	    <style>		#geocomplete { width: 200px}		.map_canvas1 { 		  width:100%; 		  height: 100%;   		}		#multiple li { 		  cursor: pointer; 		  text-decoration: underline; 		}				</style>					<link rel="stylesheet" type="text/css" href="cod/labels/css/regCon2NewLabel.css">            </head><body><!--START TOPBAR-->		 <% include ../../generals/topbar.ejs %>		         <!-- START CONTAINER -->        <div class="page-container row-fluid">        <!-- START CONTENT -->        <section class="wrapper" style='display:inline-block;width:100%;'>    	    <table align="left" style="position:relative; top:5px; z-index:9000;">   	    <tr>   	  	<td style="padding:0 2px 0 2px;"><a class="pure-button" onclick="showClient()" > <font color="#677A85">Register Consignee</font></a></td>   	  	<td style="padding:0 2px 0 2px"><a class="pure-button" onclick="showStore()"><font color="#677A85">Register Store</font></a></td>		   	    </tr></table>			      <div style="position:absolute; left:20%;" id="newLabelForm">        <% include newlabel_partitions/LabelForm.ejs %>	</div>							<section class="wrapper" style='margin-top:60px;display:inline-block;width:100%;padding:15px 0 0 15px; display:none;' id="registerClient">			<a class="pure-button" onclick="hideClient()" > <font color="#E08566">New Receipt</font></a>	 	   <div style="margin-left:13%; width:500px;position:relative; top:-144px;">           	 	   <form name="regClientform">          <div id="receipt_edit">	  				  		<div class="section-3-REG" id="regClient">		  			<div class="cont-135-REG" id="regClient" style="height:410px;">		  				<div class="cont-136-REG" id="regClient">		  					<div class="cont-137-REG" id="regClient">		  						<div class="cont-138-REG" id="regClient"><p class="para-57"><span class="font-57-REG">Consignee Registration</span></p></div>		  					</div>		  				</div>		  				<div class="cont-139-REG" id="regClient">		  					<div class="colwrapper-42-REG" id="regClient">		  						<div class="cont-140-REG" id="regClient">		  							<div class="cont-141-REG" id="regClient"><p class="para-58-REG"><span class="font-58-REG">Full Name:</span><span class="font-59">:</span></p></div>		  						</div>		  					</div>		  					<div class="colwrapper-43-REG" id="regClient">		  						<div class="cont-142-REG" id="regClient">		  							<input type="text" id="clientName" name="clientName" class="input-REG">		  						</div>		  					</div>		  					<div class="colwrapper-44-REG" id="regClient">		  						<div class="cont-143-REG" id="regClient">		  							<div class="cont-144-REG" id="regClient"><p class="para-59-REG"><span class="font-60-REG">Destinations:</span></p></div>		  						</div>		  					</div>		  					<div class="colwrapper-45-REG">		  						<div class="cont-145-REG">		  			<input id="geocomplete" type="text" placeholder="Type in an address" class="input-2-REG"/><button id="find" style="display:none;"  id="nesto-submit" class="btn btn-lg btn-nesto-o" style="top:-80px; left:40%;"/>Add</button>		  						</div>		  					</div>		  				</div>		  				<div class="cont-146-REG" id="regClient">		  					<div class="colwrapper-46-REG" id="regClient">		  						<div class="cont-147-REG" id="regClient">		  							<div class="cont-148-REG" id="regClient"><p class="para-60-REG"><span class="font-61-REG">Account#:</span></p></div>		  						</div>		  						<div class="cont-149-REG" id="regClient">		  							<div class="cont-150-REG" id="regClient"><p class="para-61-REG"><span class="font-63-REG">ID</span><span class="font-64-REG">:</span></p></div>		  						</div>		  					</div>		  					<div class="colwrapper-47-REG" id="regClient">		  						<div class="cont-151-REG" id="regClient">		  							<input type="text" maxlength="55" id="clientAccountID" name="clientAccountID" class="input-3-REG">		  						</div>		  						<div class="cont-152-REG" id="regClient">		  							<input type="text" name="text" class="input-4-REG">		  						</div>		  					</div>		  					<div class="colwrapper-48-REG" id="regClient">		  						<div class="cont-153-REG" id="regClient">                                       <pre><b>Destinations List:</b>                                            <table id="logger" style='overflow:scroll; height:133px;'>                                           </table>                                       </pre>		  						</div>		  					</div>		  				</div>		  				<div class="cont-154-REG" id="regClient">		  					<div class="colwrapper-49-REG" id="regClient">		  						<div class="cont-155-REG" id="regClient">		  							<div class="cont-156-REG" id="regClient"><p class="para-62-REG"><span class="font-65-REG">Tel:</span></p></div>		  						</div>		  					</div>		  					<div class="colwrapper-50-REG" id="regClient">		  						<div class="cont-157-REG" id="regClient">		  							<input type="text" maxlength="55" id="clientTelephone" name="clientTelephone" class="input-5-REG">		  						</div>		  					</div>		  				</div>		  				<div class="cont-158-REG" id="regClient">		  					<div class="colwrapper-51-REG" id="regClient">		  						<div class="cont-159-REG" id="regClient">		  							<div class="cont-160-REG" id="regClient"><p class="para-63-REG"><span class="font-66-REG">Cel:</span></p></div>		  						</div>		  						<div class="cont-161-REG" id="regClient">		  							<div class="cont-162-REG" id="regClient"><p class="para-64-REG"><span class="font-67-REG">Email:</span></p></div>		  						</div>		  						<div class="cont-163-REG" id="regClient">		  							<div class="cont-164-REG" id="regClient"></div>		  						</div>		  						<div class="cont-165-REG" id="regClient">		  							<div class="cont-166-REG" id="regClient"></div>		  						</div>		  					</div>		  					<div class="colwrapper-52-REG" id="regClient">		  						<div class="cont-167-REG" id="regClient">		  							<input type="text" name="text" class="input-6-REG">		  						</div>		  						<div class="cont-168-REG" id="regClient">		  							<input type="text" maxlength="55" id="clientEmail" name="clientEmail" class="input-7-REG">		  						</div>		  						<div class="cont-169-REG" id="regClient">		  									  						</div>		  						<div class="cont-170-REG" id="regClient">		  									  						</div>		  					</div>		  						  				</div>		  				<div class="cont-172-REG" id="regClient">		  					<div class="colwrapper-54-REG" id="regClient">		  						<div class="cont-173-REG" id="regClient">		  							<div class="cont-174-REG" id="regClient"></p></div>		  						</div>		  					</div>		  					<div class="colwrapper-55-REG" id="regClient">		  						<div class="cont-175-REG" id="regClient">		  									  						</div>		  					</div>		  					<div class="colwrapper-56-REG" id="regClient">		  						<div class="cont-176-REG" id="regClient">		  							<a class="button-REG" href="index.html">Clear</a>		  						</div>		  					</div>		  					<div class="colwrapper-57-REG" id="regClient">		  						<div class="cont-177-REG" id="regClient">		  							<input type="submit" class="button-2-REG">Save</a>		  						</div>		  					</div>		  				</div>		  				<div class="cont-178-REG" id="regClient"></div>		  			</div>		  		</div>		  		<script type="text/javascript">		  			var androidBrowserVersion = RegExp(/Mozilla\/5\.0 \(Linux; .; Android ([\d.]+)/).exec(navigator.userAgent);		  if(androidBrowserVersion && parseFloat(androidBrowserVersion[1]) < 5) { document.getElementsByTagName('body')[0].className+=' whitespacefix'; }		  		</script>                         </div>	 	     </form>	 	 	   </div>            </section>																		<section class="wrapper" style='margin-top:60px;display:inline-block;width:100%;padding:15px 0 0 15px; display:none;' id="registerStore">					<a class="pure-button" onclick="hideStore()" > <font color="#E08566">New Receipt</font></a>			 	   <div style="margin-left:15%; width:500px;">			 	   <form name="regClientform">			 	   <div class="content-body">				   <div class="row">			 	   <div class="col-md-12 col-sm-12 col-xs-12">									                <div class="form-group">						<label class="form-label" for="field-1"><b>Register Store</b></label></br>			 	        <label class="form-label" for="field-1">Name:</label>			 	        <div class="controls">			 	        <input type="text" class="form-control" maxlength="55" id="storeName" name="storeName">			 	        </div>			 	        </div>		               			 	        <div class="form-group">			 	        <label class="form-label" for="field-1">Email:</label>			 	        <div class="controls">			 	        <input type="text" class="form-control" maxlength="55" id="storeEmail" name="storeEmail">			 	        </div>			 	        </div>			 	        <div class="form-group">			 	        <label class="form-label" for="field-1">Address:</label>			 	        <div class="controls">			 	        <input type="text" class="form-control" maxlength="200" id="storeAddress" name="storeAddress">                        <input type="hidden" id="storeAlias" name="storeAlias">                        <input type="hidden" id="storeAddress" name="storeAddress">                        <input type="hidden" id="storeCountry" name="storeCountry">                        <input type="hidden" id="storeCountryCode" name="storeCountryCode">                        <input type="hidden" id="storeGeoCode" name="storeGeoCode">	 						 	        </div>			 	        </div>		                <div class="form-group">			 	        <label class="form-label" for="field-1">Telephone:</label>			 	        <div class="controls">			 	        <input type="text" class="form-control" maxlength="55" id="storeTelephone" name="storeTelephone">			 	        </div>			 	        </div>								                <div class="form-group">			 	        <label class="form-label" for="field-1">Account #:</label>			 	        <div class="controls">			 	        <input type="text" class="form-control" maxlength="55" id="agencyAccountID" name="agencyAccountID">			 	        </div>			 	        </div>							               <div class="form-group">			 		   <input type="button" id="btn_registerStore" style="length:50px;" value="submit" class="pure-button pure-button-primary">			 	       </div>			 	            </div>			 	          </div>		                </div>			 	     </form>			 	   </div>		            </section>			                  <!-- END CONTENT -->           <div id="openModalPrint" class="modalDialog">	        <div>            <a href="#close" title="Close" class="close">X</a>            <div id="modalmessage" style="margin-left:21%;">            <img src="/web/img/icons/loader_grey.gif">            </div>	</div></div>              </div><!-- END CONTAINER -->        <!-- LOAD FILES AT PAGE END FOR FASTER LOADING -->        <%include ../../generals/endFiles.ejs%>        <!-- modal end --><script>                    var nwarehouses = 1;             $(function(){            var options = {                        };                     $("#geocomplete").geocomplete(options)              .bind("geocode:result", function(event, result){                  /*alert(JSON.stringify(result) );*/                               $.log(result);              })		                .bind("geocode:error", function(event, status){                /*$j.log("ERROR: " + status);*/              })                         .bind("geocode:multiple", function(event, results){                /*$j.log("Multiple: " + results.length + " results found");*/              });                  });                 $("#find").click(function(){            $("#geocomplete").val('');          });                        $.log = function(result){            var message = result.formatted_address;            var wareName = result["address_components"][0]["long_name"];                     var long_name;            var short_name;                     for( i in result["address_components"] )            {                if( $.inArray("country", result["address_components"][i]["types"]) > -1)                {                    wareName += " - " + result["address_components"][i]["long_name"];                    long_name = result["address_components"][i]["long_name"];                    short_name = result["address_components"][i]["short_name"];                    break;                }            }                     var logger = $("#logger");            logger.html(logger.html()+ "<tr><td style='white-space: nowrap; padding-top: 0px;' align='left'>" +                             "<a onclick='deleteRow(this)'>Delete</a>"  +                            "\n * " + message + "\n" + "<b><font color='#E08566'>Destination Name:</font></b>" + "\n" +                             "<input type='text' name='Alias" + nwarehouses.toString() + "' value='"+ wareName +                            "' placeholder='Destination Name' style='width:34%; background:white; height:34px;'><input type='hidden' value='" + message +                            "' name='Address"+ nwarehouses.toString() +"'>"+                              "<input type='hidden' name='Country"+ nwarehouses.toString() +"' value='"+ long_name +"'>" +                            "<input type='hidden' name='CountryCode"+ nwarehouses.toString() +"' value='"+ short_name +"'>" +                            "<input type='hidden' name='GeoCode"+ nwarehouses.toString() +"' value='"+ JSON.stringify(result) +"'></td></tr>");                                     nwarehouses += 1;                     $("#geocomplete").val('');          };		    		function deleteRow(btn) {  		  var row = btn.parentNode.parentNode;  		  row.parentNode.removeChild(row);  		}     /* STORE GEOCOMPLETION STUFF */        $(function(){        var options = {        };                $("#storeAddress").geocomplete(options)          .bind("geocode:result", function(event, result){                          $.logStore(result);          })                    .bind("geocode:error", function(event, status){                    })                    .bind("geocode:multiple", function(event, results){                    });             });                  $.logStore = function(result){            var wareName = result["address_components"][0]["long_name"];            var destination = result["address_components"][0]["long_name"];                        var long_name;            var short_name;                        for( i in result["address_components"] )            {                if( $.inArray("country", result["address_components"][i]["types"]) > -1)                {                    wareName += " - " + result["address_components"][i]["long_name"];                    long_name = result["address_components"][i]["long_name"];                    short_name = result["address_components"][i]["short_name"];                    break;                }            }                      $("#storeAddress").val(result.formatted_address);            $("#storeAlias").val(wareName);            $("#storeCountry").val(long_name);            $("#storeCountryCode").val(short_name);            $("#storeGeoCode").val(JSON.stringify(result) );                  };    /* REGISTRATION CLIENT PROCESS */    $("#btn_registerClient").click(function(){            var Clients = Parse.Object.extend("Clients");            var client = new Clients();                        client.set("Name", $("#clientName").val() );            client.set("Email", $("#clientEmail").val() );            client.set("Telephone", $("#clientTelephone").val() );			client.set("AccountID", $("#clientAccountID").val() );            client.set("Company", user.get("Company") );		                client.save({success:function(client){                                var Destinations = Parse.Object.extend("Destinations");                    var destination = new Destinations();                                        destination.save({                            Alias: $("#clientAlias").val(),                            Address: $("#clientAddress").val(),                            Country: $("#clientCountry").val(),                            CountryCode: $("#clientCountryCode").val(),                            GeoCode: $("#clientGeoCode").val(),                            Client: client                        });                                            /* SHOW THE NEWLABEL FORM WITH THE CLIENT PRE-SELECTED */                                        $("#Consignee").val(client.get("Name") );                                        fillDestinations(client.id);                                        hideClient();                }});        });    /* REGISTRATION STORE PROCESS */    $("#btn_registerStore").click(function(){            var Agencies = Parse.Object.extend("Agencies");            var agency = new Agencies();                        agency.set("Name", $("#storeName").val() );            agency.set("Email", $("#storeEmail").val() );            agency.set("Telephone", $("#storeTelephone").val() );            agency.set("Address", $("#storeAddress").val() );            agency.set("Country", $("#storeCountry").val() );			agency.set("AccountID", $("#agencyAccountID").val() );            agency.set("CountryCode", $("#storeCountryCode").val() );            agency.set("GeoCode", $("#storeGeoCode").val() );                        agency.set("Company", user.get("Company") );                        agency.save({success:function(agency){                                                        /* SHOW THE NEWLABEL FORM WITH THE STORE PRE-SELECTED */                                        $("#Shipper").val(agency.get("Name") );                                        shipperID = agency.id;                                        $("#storeNameInfo").html(agency.get("Name") );                    $("#storeCountryInfo").html(agency.get("Country") );                    $("#storeEmailInfo").html(agency.get("Email") );                    $("#storeTelephoneInfo").html(agency.get("Telephone") );                    $("#storeAddressInfo").html(agency.get("Address") );                    $("#storeWebsiteInfo").html(agency.get("Website") );                    $("#storeStatusInfo").html(agency.get("Status") );                                        hideClient();                }});        });    </script><script>    Parse.initialize("XEPryFHrd5Tztu45du5Z3kpqxDsweaP1Q0lt8JOb", "MDhb1hBngr2tx2v9TjyzoUhMcOFeWGJ56TWvChqi");    /* GLOBAL USER */    var user;    /* OBTENCION Y ALMACENAMIENTO DEL CURRENT USER PARA USARSE CLIENTSIDE */    var query = new Parse.Query("User");        query.descending('createdAt');    query.include("Company");        query.get("<%= user.id%>", {        success:             function(object)            {                /*                alert("User retrieved: " + object.get("username") );                alert("Main cellar: " + object.get("CellarID").id );                */                                                /* SAVE USER FOR FUTURE OPERATIONS */                user = object;                                /* LLENADO DINAMICO DE SELECT DE BODEGAS DE ESTA EMPRESA */                var query = new Parse.Query("Cellars");                                query.equalTo("Company", {__type: "Pointer", className: "Companies", objectId: user.get("Company").id} );                query.ascending('createdAt');                                query.find({                    success:                         function(results)                        {                            for(i in results)                            {                                   wareselect = document.getElementById("Warehouse");                                wareselect.options[wareselect.options.length] = new Option(results[i].get("Name"), results[i].id);                            }                                                    }                    });                                            }        });</script></body></html>