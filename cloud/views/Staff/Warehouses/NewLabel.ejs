<!doctype html><html lang="en">    <head>                <meta http-equiv="content-type" content="text/html;charset=UTF-8" />        <meta charset="utf-8" />        <title>LC Cargo</title>        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />        <meta content="" name="description" />        <meta content="" name="author" /> <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Jura&amp;subset=all">     <link rel="stylesheet" href="cod/css/styleWareHouse.css">        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">        <script src="//code.jquery.com/jquery-1.10.2.js"></script>        <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>        <link rel="stylesheet" href="/resources/demos/style.css">                <script src="//www.parsecdn.com/js/parse-1.4.2.min.js"></script>                <script src="/cod/js/qrcode/qrcode.js"></script>                <script src="https://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"></script>        <script src="cod/js/jquery.geocomplete.js"></script>                <!--ADMIN REQUIREMENTS-->           <% include ../../generals/ultraAdmin.ejs %>            <script src="/cod/js/common.js"></script>        		<script>				function showClient(){			$("#newLabelForm").css('display', 'none');			$("#registerClient").css('display', '');			$("#registerStore").css('display', 'none');				}				function hideClient(){			$("#newLabelForm").css('display', '');			$("#registerClient").css('display', 'none');			$("#registerStore").css('display', 'none');				}						function hideStore(){			$("#newLabelForm").css('display', '');			$("#registerClient").css('display', 'none');			$("#registerStore").css('display', 'none');			}						function showStore(){			$("#newLabelForm").css('display', 'none');			$("#registerClient").css('display', 'none');			$("#registerStore").css('display', '');			}								</script>            </head><body><!--START TOPBAR-->		 <% include ../../generals/topbar.ejs %>		         <!-- START CONTAINER -->        <div class="page-container row-fluid">        <!-- SIDEBAR - START -->		 <% include ../../generals/sideBar.ejs %>        <!--  SIDEBAR - END -->						            <!-- START CONTENT -->                     <section class="wrapper" style='margin-top:55px;display:inline-block;width:100%;padding:15px 0 0 15px;'>			   			     	  		<table align="left" style="position:relative; top:5px; z-index:9000;">   	  	    <tr>   	  	  	<td style="padding:0 2px 0 2px;"><a class="pure-button" onclick="showClient()" > <font color="#677A85">Register Consignee</font></a></td>   	  	   <td style="padding:0 2px 0 2px"><a class="pure-button" onclick="showStore()"><font color="#677A85">Register Store</font></a></td>		   	  		</tr></table>				  	    <table align="right" style="position:relative; top:5px;  z-index:9992; ">	  	    <tr>	  	  	<td style="padding:0 2px 0 2px;"><a class="pure-button" href="/staff_warehouse" > <font color="#677A85">Warehouse</font></a></td>	  	    <td style="padding:0 2px 0 2px"><a class="pure-button" href="/staff_Repack"><font color="#677A85">Repack</font></a></td>	  	    <td style="padding:0 2px 0 2px"><a class="pure-button" href="/staff_NewLabel"><font color="#677A85">New Receipt</font></a></td>	  		</tr></table>		      <div style="position:absolute; left:25%;" id="newLabelForm">        <% include newlabel_partitions/LabelForm.ejs %>		</div>							<section class="wrapper" style='margin-top:60px;display:inline-block;width:100%;padding:15px 0 0 15px; display:none;' id="registerClient">			<a class="pure-button" onclick="hideClient()" > <font color="#E08566">New Receipt</font></a>	 	   <div style="margin-left:15%; width:500px;">           	 	   <form name="regClientform">	 	   <div class="content-body">		   <div class="row">	 	   <div class="col-md-12 col-sm-12 col-xs-12">							                <div class="form-group">				<label class="form-label" for="field-1"><b>Register Consignee</b></label></br>	 	        <label class="form-label" for="field-1">Name:</label>	 	        <div class="controls">	 	        <input type="text" class="form-control" maxlength="55" id="clientName" name="clientName">	 	        </div>	 	        </div>                	 	        <div class="form-group">	 	        <label class="form-label" for="field-1">Email:</label>	 	        <div class="controls">	 	        <input type="text" class="form-control" maxlength="55" id="clientEmail" name="clientEmail">	 	        </div>	 	        </div>	 	        <div class="form-group">	 	        <label class="form-label" for="field-1">Destination:</label>	 	        <div class="controls">	 	        <input type="text" class="form-control" maxlength="200" id="clientAddress" name="clientAddress">	 	        <input type="hidden" id="clientAlias" name="clientAlias">	 	        <input type="hidden" id="clientAddress" name="clientAddress">	 	        <input type="hidden" id="clientCountry" name="clientCountry">	 	        <input type="hidden" id="clientCountryCode" name="clientCountryCode">	 	        <input type="hidden" id="clientGeoCode" name="clientGeoCode">	 				 	        </div>	 	        </div>                <div class="form-group">	 	        <label class="form-label" for="field-1">Telephone:</label>	 	        <div class="controls">	 	        <input type="text" class="form-control" maxlength="55" id="clientTelephone" name="clientTelephone">	 	        </div>	 	        </div>					               <div class="form-group">	 		   <input type="button" id="btn_registerClient" style="length:50px;" value="Register client">	 	       </div>	 	            </div>	 	          </div>                </div>	 	     </form>	 	   </div>            </section>																		<section class="wrapper" style='margin-top:60px;display:inline-block;width:100%;padding:15px 0 0 15px; display:none;' id="registerStore">					<a class="pure-button" onclick="hideStore()" > <font color="#E08566">New Receipt</font></a>			 	   <div style="margin-left:15%; width:500px;">			 	   <form name="regClientform">			 	   <div class="content-body">				   <div class="row">			 	   <div class="col-md-12 col-sm-12 col-xs-12">									                <div class="form-group">						<label class="form-label" for="field-1"><b>Register Store</b></label></br>			 	        <label class="form-label" for="field-1">Name:</label>			 	        <div class="controls">			 	        <input type="text" class="form-control" maxlength="55" id="storeName" name="storeName">			 	        </div>			 	        </div>		               			 	        <div class="form-group">			 	        <label class="form-label" for="field-1">Email:</label>			 	        <div class="controls">			 	        <input type="text" class="form-control" maxlength="55" id="storeEmail" name="storeEmail">			 	        </div>			 	        </div>			 	        <div class="form-group">			 	        <label class="form-label" for="field-1">Address:</label>			 	        <div class="controls">			 	        <input type="text" class="form-control" maxlength="200" id="storeAddress" name="storeAddress">                        <input type="hidden" id="storeAlias" name="storeAlias">                        <input type="hidden" id="storeAddress" name="storeAddress">                        <input type="hidden" id="storeCountry" name="storeCountry">                        <input type="hidden" id="storeCountryCode" name="storeCountryCode">                        <input type="hidden" id="storeGeoCode" name="storeGeoCode">	 						 	        </div>			 	        </div>		                <div class="form-group">			 	        <label class="form-label" for="field-1">Telephone:</label>			 	        <div class="controls">			 	        <input type="text" class="form-control" maxlength="55" id="storeTelephone" name="storeTelephone">			 	        </div>			 	        </div>							               <div class="form-group">			 		   <input type="button" id="btn_registerStore" style="length:50px;" value="submit">			 	       </div>			 	            </div>			 	          </div>		                </div>			 	     </form>			 	   </div>		            </section>			                  <!-- END CONTENT -->           <div id="openModalPrint" class="modalDialog">	        <div>            <a href="#close" title="Close" class="close">X</a>            <div id="modalmessage" style="margin-left:21%;">            <img src="/web/img/icons/loader_grey.gif">            </div>	</div></div>              </div><!-- END CONTAINER -->        <!-- LOAD FILES AT PAGE END FOR FASTER LOADING -->        <%include ../../generals/endFiles.ejs%>        <!-- modal end --><script>        /* CLIENT GEOCOMPLETION STUFF */        $(function(){        var options = {        };                $("#clientAddress").geocomplete(options)          .bind("geocode:result", function(event, result){              /*alert(JSON.stringify(result) );*/                          $.log(result);          })                    .bind("geocode:error", function(event, status){                    })                    .bind("geocode:multiple", function(event, results){                    });             });                  $.log = function(result){            var wareName = result["address_components"][0]["long_name"];            var destination = result["address_components"][0]["long_name"];                        var long_name;            var short_name;                        for( i in result["address_components"] )            {                if( $.inArray("country", result["address_components"][i]["types"]) > -1)                {                    wareName += " - " + result["address_components"][i]["long_name"];                    long_name = result["address_components"][i]["long_name"];                    short_name = result["address_components"][i]["short_name"];                    break;                }            }                      $("#clientAddress").val(result.formatted_address);            $("#clientAlias").val(wareName);            $("#clientCountry").val(long_name);            $("#clientCountryCode").val(short_name);            $("#clientGeoCode").val(JSON.stringify(result) );                  };           /* STORE GEOCOMPLETION STUFF */        $(function(){        var options = {        };                $("#storeAddress").geocomplete(options)          .bind("geocode:result", function(event, result){                          $.logStore(result);          })                    .bind("geocode:error", function(event, status){                    })                    .bind("geocode:multiple", function(event, results){                    });             });                  $.logStore = function(result){            var wareName = result["address_components"][0]["long_name"];            var destination = result["address_components"][0]["long_name"];                        var long_name;            var short_name;                        for( i in result["address_components"] )            {                if( $.inArray("country", result["address_components"][i]["types"]) > -1)                {                    wareName += " - " + result["address_components"][i]["long_name"];                    long_name = result["address_components"][i]["long_name"];                    short_name = result["address_components"][i]["short_name"];                    break;                }            }                      $("#storeAddress").val(result.formatted_address);            $("#storeAlias").val(wareName);            $("#storeCountry").val(long_name);            $("#storeCountryCode").val(short_name);            $("#storeGeoCode").val(JSON.stringify(result) );                  };    /* REGISTRATION CLIENT PROCESS */    $("#btn_registerClient").click(function(){            var Clients = Parse.Object.extend("Clients");            var client = new Clients();                        client.set("Name", $("#clientName").val() );            client.set("Email", $("#clientEmail").val() );            client.set("Telephone", $("#clientTelephone").val() );            client.set("Company", user.get("Company") );                        client.save({success:function(client){                                var Destinations = Parse.Object.extend("Destinations");                    var destination = new Destinations();                                        destination.save({                            Alias: $("#clientAlias").val(),                            Address: $("#clientAddress").val(),                            Country: $("#clientCountry").val(),                            CountryCode: $("#clientCountryCode").val(),                            GeoCode: $("#clientGeoCode").val(),                            Client: client                        });                                            /* SHOW THE NEWLABEL FORM WITH THE CLIENT PRE-SELECTED */                                        $("#Consignee").val(client.get("Name") );                                        fillDestinations(client.id);                                        hideClient();                }});        });    /* REGISTRATION STORE PROCESS */    $("#btn_registerStore").click(function(){            var Agencies = Parse.Object.extend("Agencies");            var agency = new Agencies();                        agency.set("Name", $("#storeName").val() );            agency.set("Email", $("#storeEmail").val() );            agency.set("Telephone", $("#storeTelephone").val() );            agency.set("Address", $("#storeAddress").val() );            agency.set("Country", $("#storeCountry").val() );            agency.set("CountryCode", $("#storeCountryCode").val() );            agency.set("GeoCode", $("#storeGeoCode").val() );                        agency.set("Company", user.get("Company") );                        agency.save({success:function(agency){                                                        /* SHOW THE NEWLABEL FORM WITH THE CLIENT PRE-SELECTED */                                        $("#Shipper").val(agency.get("Name") );                                        shipperID = agency.id;                                        hideClient();                }});        });    </script><script>    Parse.initialize("XEPryFHrd5Tztu45du5Z3kpqxDsweaP1Q0lt8JOb", "MDhb1hBngr2tx2v9TjyzoUhMcOFeWGJ56TWvChqi");    /* GLOBAL USER */    var user;    /* OBTENCION Y ALMACENAMIENTO DEL CURRENT USER PARA USARSE CLIENTSIDE */    var query = new Parse.Query("User");        query.descending('createdAt');    query.include("Company");        query.get("<%= user.id%>", {        success:             function(object)            {                /*                alert("User retrieved: " + object.get("username") );                alert("Main cellar: " + object.get("CellarID").id );                */                                                /* SAVE USER FOR FUTURE OPERATIONS */                user = object;                                /* LLENADO DINAMICO DE SELECT DE BODEGAS DE ESTA EMPRESA */                var query = new Parse.Query("Cellars");                                query.equalTo("Company", {__type: "Pointer", className: "Companies", objectId: user.get("Company").id} );                query.ascending('createdAt');                                query.find({                    success:                         function(results)                        {                            for(i in results)                            {                                   wareselect = document.getElementById("Warehouse");                                wareselect.options[wareselect.options.length] = new Option(results[i].get("Name"), results[i].id);                            }                                                    }                    });                                            }        });</script></body></html>