<!DOCTYPE html><html>    <head>		        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />        <meta charset="utf-8" />        <title>LC Cargo</title>        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />        <meta content="" name="description" />        <meta content="" name="author" />        <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Jura&amp;subset=all">       	   <!--ADMIN REQUIREMENTS-->     <% include ../../generals/ultraAdmin.ejs %>	            <script src="/cod/js/common.js"></script>        <script src="/cod/js/moment.js"></script>            <script src="/cod/js/jquery-1.11.2.min.js"></script>        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css" />        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>	        </head>    <!-- END HEAD -->    <!-- BEGIN BODY -->    <body>		<!--START TOPBAR-->		 <% include ../../generals/topbar.ejs %>		         <!-- START CONTAINER -->        <div class="page-container row-fluid">        <!-- SIDEBAR - START -->		 <% include ../../generals/sideBar.ejs %>        <!--  SIDEBAR - END -->						            <!-- START CONTENT -->                     <section class="wrapper" style='margin-top:60px;display:inline-block;width:100%;padding:15px 0 0 15px;'>              <div class='col-lg-12 col-md-12 col-sm-12 col-xs-12'>              <div class="page-title">              <div class="pull-left">		  			  <% include labelsMenu.ejs %>              <h1 class="title">Warehouse - Repack</h1>			  			  			  			  	  	  <fieldset class="container">	  			 			  	    <div class="row">	  	      <div class="col-lg-12 col-md-12 container">	  	                      	  	            <div class="col-md-6 col-xs-6" style="margin-top:13px;">			  <!-- <input class="pure-button pure-button-primary" type='button' value='Re-Pack !' id='btn_repack'> -->              <a class="pure-button pure-button-primary" href="#openModal" id='btn_repack'>Re-pack !</a>	  	            </div>						  	            <div class="col-md-6 col-xs-6" style="margin-top:10px;">					<div style="float:right">			Search client: <input id="txt_name" name="txt_name">                    </div>                    </div>					               	          <div class="panel"> 	            <div class="panel-body"> 	              <ul id="list"> 	                <table>                        <div id="repack_content" name="repack_content" >						                    </div>                </table>  	              </ul>  	            </div>  	          </div>			  			  			        </div>			        			      </div>			 			  </fieldset>	  			  		      </div>              </div>              </div>            </section>            <!-- END CONTENT -->                         </div><!-- END CONTAINER -->        <!-- LOAD FILES AT PAGE END FOR FASTER LOADING --><%include ../../generals/endFiles.ejs%>        <!-- modal end -->    <div id="openModal" class="modalDialogB">        <div>            <a href="#close" title="Close" class="closeB">X</a>            <div id="repack_form">            </div>        </div>    </div>            <script>    /* ESTA VARIABLE ALMACENA EL OBJECTID DEL USUARIO SELECCIONADO */    usrID = -1;  	$( "#txt_name" ).autocomplete({source: []});   	$("#txt_name").keyup(		function(){			var myval = $("#txt_name").val();						if(myval.length >= 1){				$.post("/autofill_client", 				{"txt_search":myval}, 				function(data){					result = JSON.parse(data);                    newresult = [];                    for(var i=0; i<result.length; i++){                        newresult.push({label:result[i]["Name"], idx:result[i]["objectId"]});                    }										$( "#txt_name" ).autocomplete({source: newresult});   					$('#txt_name').trigger("keydown");				});			}		});                /*CLIENT SELECCION FROM THE RESULT*/        $( "#txt_name" ).autocomplete({             select: 			 function( event, ui ){                                        usrID = ui.item.idx;                                        InsertTable({                            cols:   /*Columnas definidas FIELD:TITLE or FIELD:{FIELDNEEDED:FIELDTITLE}*/                                 {                                                                        "Receipt":"",                                    "Shipper":{"Name":""}, /*This is the sintax for return fields of pointers showed on table*/                                    "ReceiptDate":"",                                    "Country":"",                                    "Volume":"",                                    "Warehouse":"",                                    "Invoice":"",                                    "Transport":"",                                    "objectId":""                                },                                                            /* AL PASAR EL PARAMETRO COLLECTION INDICAMOS QUE NECESITAMOS BUSQUEDA CON LISTA DE RESULTADOS */                            collection: "Warehouses", /* COLLECCION PRINCIPAL */                            by: "Consignee",    /* CAMPO DE BUSQUEDA */                            value: {__type: "Pointer", className: "Clients", objectId: usrID},                                                        conditions: {"equalTo": {"Status":"Received"}},                            /*conditions: {"notEqualTo": {'Repack' :  {__type: "Pointer", className: "Clients", objectId:""}}},*/                                                        document: "Staff/Warehouses/repack_partitions/RepackTable",                            itemid: "repack_content"                        });                                                                    InsertForm({                                document: "Staff/Warehouses/repack_partitions/RepackForm",                                itemid: "repack_form"                        });                }          });           repack_items = [];     $("#btn_repack").click(function(){                if(usrID == -1)        {            alert("User not selected");            return false;        }                var repack_text = "Repack detail:\n\n";                var checkboxes = document.getElementsByName("checkware");              for(i in checkboxes)        {            if(checkboxes[i].checked)            {                repack_items.push(checkboxes[i].id);                repack_text += "Receipt ID: " + checkboxes[i].id + "\n---------------------------\n";            }        }                /* NOT CHECKBOXES SELECTED? */        if(repack_items.length == 0)        {            alert("You must select almost one warehouse for repack");            return false;        }                $("#InternalNotes").val(repack_text);                /*        InsertForm2({                    params: {"warehouselist":repack_items, "internal_notes":repack_text, "usrID":usrID},                    document: "staff_RepackForm",                    itemid: "openModal"            });*/                    /*$("#repack_content").replaceWith("<div id='openModal' class='modalDialog'><div><a href='#close' title='Close' class='close'>X</a><h2>Modal Box</h2><p>This is a sample modal box that can be created using the powers of CSS3.</p><p>You could do a lot of things here like have a pop-up ad that shows when your website loads, or create a login/register form for users.</p></div></div>");        */            });                           </script>            </body>	</html>