<div id="tabwarehouses"><div class="pull-right"></div><div class="row">    <div class="col-lg-12 col-md-12 container">        <div class="row">            <div class="col-md-6 col-xs-6" style="margin-top:13px;">                            <div align="left">                    <b>Warehouse</b>                    <select  id="warehousefilter" name="warehousefilter">                        <option value="All">All</option>                    </select>                </div>                            </div>                            <div class="col-md-6 col-xs-6" style="margin-top:10px;">                <div align="right">                      <label for="filterby" class="pfont">By:</label>                                   <select  id="filterby" name="filterby">                        <option value="All">All</option>                        <option value="Shipper">Shipper</option>                        <option value="ReceiptNum">Receipt #</option>                        <option value="Date">Date</option>                        <option value="Destination">Destination</option>                    </select>                    <!-- IF ALL OR DATE SELECTED THIS SEARCH INPUT IS NOT USE-->                    <input type="hidden" placeholder="Search"  id="searchtext" name="searchtext">                           <label class="pfont">Date:</label>                    <select id="filterdate" name="filterdate">                        <option value="All">All</option>                        <option value="Today">Today</option>                        <option value="Yesterday">Yesterday</option>                        <option value="This week">This week</option>                        <option value="This month">This month</option>                        <option value="Last month">Last month</option>	                        <option value="Current year">Current Year</option>                    </select>                                        <button id='btn_search' class="pure-button pure-button-primary">Search</button>                                    </div>            </div>        </div>              <div class="panel">            <div class="panel-body">                <div id="warehousestable">                    <%include warehouses_dynamictable.ejs%>                </div>            </div>        </div>		<script>        /* LLENADO DINAMICO DE SELECT DE BODEGAS DE ESTA EMPRESA */        var query = new Parse.Query("Cellars");                query.equalTo("Company", {__type: "Pointer", className: "Companies", objectId: user.get("Company").id} );        query.ascending('createdAt');                query.find({            success:                 function(results)                {                    wareselect = document.getElementById("warehousefilter");                                        for(i in results)                    {                           wareselect.options[wareselect.options.length] = new Option(results[i].get("Name"), results[i].id);                    }                                    }            });        function update_table()        {            if($("#warehousefilter").val() == "All")                conditions = {containedIn:{"Status":["Repack","Received","NotProcessed"]}};            else                conditions = {containedIn:{"Status":["Repack","Received","NotProcessed"]},                                 equalTo:{Warehouse:{__type: "Pointer", className: "Cellars", objectId: $("#warehousefilter").val()} }};                            alert(JSON.stringify(filter_conditions_with_dict({conditions:conditions})) );                            InsertTable({                    cols:   /*Columnas definidas FIELD:TITLE or FIELD:{FIELDNEEDED:FIELDTITLE}*/                         {                            "ReceiptNum":"",                            "Shipper":{"Name":""}, /*This is the sintax for return fields of pointers showed on table*/                            "ReceiptDate":"Date",                            "Destination":"",                            "Volume":"",                            "Warehouse":{"Name":""},                            "TotalBoxes":"",                            "Transport":"",                            "Shipment":"",                            "Status":"",                            "objectId":""                        },                                            /* AL PASAR EL PARAMETRO COLLECTION INDICAMOS QUE NECESITAMOS BUSQUEDA CON LISTA DE RESULTADOS */                    collection: "Receipts", /* COLLECCION PRINCIPAL */                                                                                        conditions: filter_conditions_with_dict({conditions:conditions}),                                                                                        by: "Consignee",    /* CAMPO DE BUSQUEDA */                    value: {__type: "Pointer", className: "Clients", objectId: usrID},                                        /*BUSQUEDA DE SEARCH TIPO LIKE*/                    like: filter_like(),                                        document: "Staff/Clients/profiles_partitions/warehouses_dynamictable",                    itemid: "warehouses_dynamictable"                });                                }        $("#btn_search").click(function()            {                update_table();            });                    $("#filterdate").change(function(){            update_table();        });                  $("#warehousefilter").change(function(){            update_table();        });         $("#filterby").change(function()            {                filterby_changed();     /* DEFAULT PARAMETERS ARE OK FOR STANDAR filterby, filterdate, etc */            });                function wareceipt(objectId)    {                $.post("/getby",                 {by:"objectId", value:objectId, classvar:"Warehouses"},                 function(data){                                    wh = JSON.parse(data);                                        $("#Receipt").val(wh["Receipt"]);                    $("#ReceiptDate").val(moment(wh["ReceiptDate"]).format("MM[/]DD[/]YYYY") );                    $("#Agent").val(wh["Agent"]);                    $("#Transport").val(wh["Transport"]);                    $("#Warehouse").val(wh["Warehouse"]);                    $("#Country").val(wh["Country"]);                    $("#Prices").val(wh["Prices"]);                    $("#Weight").val(wh["Weight"]);                    $("#WeightVol").val(wh["WeightVol"]);                    $("#Volume").val(wh["Volume"]);                    $("#ExtraCost").val(wh["ExtraCost"]);                    $("#Invoice").val(wh["Invoice"]);                    $("#Value").val(wh["Value"]);                    $("#Zone").val(wh["Zone"]);                    $("#Content").val(wh["Content"]);                    $("#GeneralNotes").val(wh["GeneralNotes"]);                    $("#InternalNotes").val(wh["InternalNotes"]);                                                            var nrows = 1;                    boxes = JSON.parse(wh["Boxes"]);                                        for(box in boxes)                    {                                                if(typeof $("#Length-"+nrows.toString() ).val() == "undefined" )                        {                            $( "#btn_addbox" ).trigger("click");                        }                                                $("#Length-"+nrows.toString() ).val(boxes[box]["length"]);                        $("#Width-"+nrows.toString() ).val(boxes[box]["width"]);                        $("#Height-"+nrows.toString() ).val(boxes[box]["height"]);                        $("#Weight-"+nrows.toString() ).val(boxes[box]["weight"]);                        $("#Boxes-"+nrows.toString() ).val(boxes[box]["boxes"]);                                                nrows += 1;                    }                });    }</script>				    </div>		</div>     		</div>